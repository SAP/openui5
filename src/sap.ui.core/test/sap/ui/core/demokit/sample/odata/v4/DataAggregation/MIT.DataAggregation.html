<!DOCTYPE HTML>
<html>
	<head>
		<style type="text/css">
			body {font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;}
		</style>
		<title>Manual Integration Test: Data Aggregation</title>
	</head>
	<body>
		<h1>Manual Integration Test: Data Aggregation</h1>
		<h2>DESCRIPTION</h2>
		Test scrolling and expanding of aggregated data.
		<h2>PREPARATION</h2>

		To check console errors open the developer tools before starting the application and check
		with each step, that there are no errors and warnings. Ignore initial message bundle errors.

		<h3>Testing with mock data</h3>
		Start the Data Aggregation application URL (adjust host and port if necessary):
		<ul>
			<li> local:
				<a href="http://localhost:8080/test-resources/sap/ui/core/demokit/sample/common/index.html?component=odata.v4.DataAggregation">
					http://&lt;host>:&lt;port>/test-resources/sap/ui/core/demokit/sample/common/index.html?component=odata.v4.DataAggregation
				</a>
			</li>
		</ul>

		<h2>REALIZE and CHECK</h2>
		<h3>0. Grand Total</h3>
			<b>Check:</b> The table should have the following content:
			<table border="1px" cellspacing="0" >
				<tr>
					<th>Level</th>
					<th>Group Level Count</th>
					<th>(Icon's Tooltip)</th>
					<th>Country</th>
					<th>Region</th>
					<th>Segment</th>
					<th>Account Responsible</th>
					<th>Sales Amount</th>
					<th>Local Currency</th>
					<th>Sales Number</th>
					<th>Is Total</th>
				</tr>
				<tr>
					<td>0</td>
					<td></td>
					<td>Collapse</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td>79,443,315</td>
					<td></td>
					<td></td>
					<td><input type="checkbox" checked/></td>
				</tr>
				<tr>
					<td>1</td>
					<td></td>
					<td>Expand</td>
					<td>United Kingdom</td>
					<td></td>
					<td></td>
					<td></td>
					<td>14,548,502</td>
					<td>GBP</td>
					<td></td>
					<td><input type="checkbox" checked/></td>
				</tr>
				<tr>
					<td>1</td>
					<td></td>
					<td>Expand</td>
					<td>USA</td>
					<td></td>
					<td></td>
					<td></td>
					<td>40,405,175</td>
					<td>USD</td>
					<td></td>
					<td><input type="checkbox" checked/></td>
				</tr>
				<tr>
					<td>1</td>
					<td></td>
					<td>Expand</td>
					<td>Germany</td>
					<td></td>
					<td></td>
					<td></td>
					<td>24,489,638</td>
					<td>EUR</td>
					<td></td>
					<td><input type="checkbox" checked/></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td>&nbsp;</td>
				</tr>
			</table>
		<h3>1. Expand <code>Germany</code> (no region)</h3>
		<ol>
			<li>Click on the expand button in the row with country <code>Germany</code>.</li>
			<li><b>Check:</b> One new row appears below that row, with country
				<code>Germany</code> and region <code>Saxony</code>.
			</li>
			<li><b>Check:</b> Group Level Count for expanded row changes to <code>7</code>.</li>
		</ol>
		<h3>2. Scroll to the end of the table</h3>
		<ol>
			<li>Click on any <code>Germany</code> to move the focus to the table.</li>
			<li>Press CTRL-END to scroll to	the end of the table.</li>
			<li><b>Check:</b> The grand total row is still displayed at the top, and the row with
				country <code>Germany</code> and region <code>Hamburg</code> is displayed next.
			</li>
		</ol>
		<h3>3. Expand the last visible node</h3>
		<ol>
			<li>Click on the expand button of the last visible row (with region
				<code>Baden-W&uuml;rttemberg</code>).
			</li>
			<li><b>Check:</b> The scrollbar of the table has changed.</li>
			<li><b>Check:</b> Group Level Count for expanded row changes to <code>3</code>.</li>
			<li>Click on any <code>Germany</code> to move the focus to the table.</li>
			<li>Press CTRL-END to scroll to the end of the table.</li>
			<li><b>Check:</b> The grand total row is still displayed at the top, and the row with
				country <code>Germany</code> and region <code>Baden-W&uuml;rttemberg</code> is
				displayed next.
			</li>
		</ol>
		<h3>4. Expand the last visible node</h3>
		<ol>
			<li>Click on the expand button of the last visible row with region
				<code>Baden-W&uuml;rttemberg</code> and the segment <code>Small</code>.
			</li>
			<li><b>Check:</b> The scrollbar of the table has changed.</li>
			<li><b>Check:</b> Group Level Count for expanded row changes to <code>2</code>.</li>
			<li>Click on any <code>Germany</code> to move the focus to the table.</li>
			<li>Press CTRL-END to scroll to	the end of the table.</li>
			<li><b>Check:</b> The table should have the following content:
				<br>
				<table border="1px" cellspacing="0" >
					<tr>
						<th>Level</th>
						<th>Group Level Count</th>
						<th>(Icon's Tooltip)</th>
						<th>Country</th>
						<th>Region</th>
						<th>Segment</th>
						<th>Account Responsible</th>
						<th>Sales Amount</th>
						<th>Local Currency</th>
						<th>Sales Number</th>
						<th>Is Total</th>
					</tr>
					<tr>
						<td>0</td>
						<td></td>
						<td>Collapse</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td>79,443,315</td>
						<td></td>
						<td></td>
						<td><input type="checkbox" checked/></td>
					</tr>
					<tr>
						<td>3</td>
						<td></td>
						<td>Expand</td>
						<td>Germany</td>
						<td>Baden-W&uuml;rttemberg</td>
						<td>Mid-size</td>
						<td></td>
						<td>526,122</td>
						<td>EUR</td>
						<td></td>
						<td><input type="checkbox" checked/></td>
					</tr>
					<tr>
						<td>3</td>
						<td>2</td>
						<td>Collapse</td>
						<td>Germany</td>
						<td>Baden-W&uuml;rttemberg</td>
						<td>Small</td>
						<td></td>
						<td>125,093</td>
						<td>EUR</td>
						<td></td>
						<td><input type="checkbox" checked/></td>
					</tr>
					<tr>
						<td>4</td>
						<td></td>
						<td>Leaf</td>
						<td>Germany</td>
						<td>Baden-W&uuml;rttemberg</td>
						<td>Small</td>
						<td>Erwin Fischer</td>
						<td>61,632</td>
						<td>EUR</td>
						<td>1,032</td>
						<td><input type="checkbox"/></td>
					</tr>
					<tr>
						<td>4</td>
						<td></td>
						<td>Leaf</td>
						<td>Germany</td>
						<td>Baden-W&uuml;rttemberg</td>
						<td>Small</td>
						<td>Winfried Maier</td>
						<td>63,461</td>
						<td>EUR</td>
						<td>1,178</td>
						<td><input type="checkbox"/></td>
					</tr>
				</table>
			</li>
		</ol>
		<h3>5. Collapse <code>Germany</code> (no region)</h3>
		<ol>
			<li>Press CTRL-HOME to scroll to the start of the table.</li>
			<li>Click on the collapse button of the row with country <code>Germany</code> and no
				region.
			</li>
			<li><b>Check:</b> The table should have the same content as initially.</li>
		</ol>

		<h3>6. Expand <code>Germany</code> (no region) again</h3>
		<ol>
			<li>Click on the expand button in the row with country <code>Germany</code> and no
				region.
			</li>
			<li>Click on any <code>Germany</code> to move the focus to the table.</li>
			<li>Press CTRL-END to scroll to the end of the table.</li>
			<li><b>Check:</b> The table should have the same content as described in #4.4.</li>
		</ol>

		<h3>7. Grand Total at Bottom Only</h3>
		<ol>
			<li>Add the URL parameter <code>&grandTotalAtBottomOnly=true</code> to the original URL
				and repeat the above steps 0 through 6.
			</li>
			<li><b>Check:</b> The grand total row (the one with level 0) is now displayed at the
				bottom only (instead of the top), but everything else works the same.
			</li>
		</ol>

		<h3>8. Grand Total at Top and Bottom</h3>
		<ol>
			<li>Add the URL parameters <code>&grandTotalAtBottomOnly=false&visibleRowCount=6</code>
				to the original URL and repeat the above steps 0 through 6.
			</li>
			<li><b>Check:</b> The grand total row (the one with level 0) is now displayed both at
				the top and bottom, but everything else works the same.
			</li>
			<li><b>Check:</b>The grand total row copy at the bottom is shown as a leaf.</li>
		</ol>

		<h3>9. Subtotals at Bottom Only</h3>
		<ol>
			<li>Add the URL parameters <code>&subtotalsAtBottomOnly=true</code> to the original URL
				and repeat the above steps 0 through 6.
			</li>
			<li><b>Check:</b> Whenever a node is expanded, subtotals are not shown in the same row
				anymore, but as a separate row after all children. It has the same level, is marked
				as a total row, and is a leaf. Everything else works the same.
			</li>
		</ol>

		<h3>10. Subtotals at Top and Bottom</h3>
		<ol>
			<li>Add the URL parameters <code>&subtotalsAtBottomOnly=false</code> to the original URL
				and repeat the above steps 0 through 6.
			</li>
			<li><b>Check:</b> Whenever a node is expanded, subtotals are still shown in the same row
				as before and as a separate row after all children. It has the same level, is marked
				as a total row, and is a leaf. Everything else works the same.
			</li>
			<li>Feel free to test any combination of grand total and subtotals placement.</li>
		</ol>

		<h3>11. "Download"</h3>
		<ol>
			<li>Click the download button in the upper right corner.
			</li>
			<li><b>Check:</b> A new browser window or tab opens with the raw data. In theory, you
				should be able to save it as a JSON file and import that into Excel.
			</li>
		</ol>

		<h3>12. Leaf Count</h3>
		<ol>
			<li>Add the URL parameter <code>&leafCount=true</code> to the original URL and repeat
				the above steps 0 through 6.
			</li>
			<li><b>Check:</b> The title is "Sales Amount by Account Responsible (90)" with a proper
				leaf count. Everything else works the same.
			</li>
			<li>Feel free to test any combination with other tests.</li>
		</ol>
	</body>
</html>
