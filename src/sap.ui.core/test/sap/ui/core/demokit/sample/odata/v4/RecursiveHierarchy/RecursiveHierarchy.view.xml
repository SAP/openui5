<mvc:View
	class="sapUiSizeCompact"
	controllerName="sap.ui.core.sample.odata.v4.RecursiveHierarchy.RecursiveHierarchy"
	xmlns="sap.ui.table"
	xmlns:m="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:rm="sap.ui.table.rowmodes">

	<Table id="table" ariaLabelledBy="title"
		rows="{
				path : '/EMPLOYEES',
				parameters : {
					$count : false,
					$filter : 'STATUS ne \'Out\'',
					$orderby : 'AGE',
					$$patchWithoutSideEffects : true
				},
				suspended : true
			}"
		selectionMode="None">
		<extension>
			<m:Toolbar design="Transparent" class="sapMTBHeader-CTX">
				<m:Title id="title" level="H1" text="Organizational Chart"/>
				<m:ToolbarSpacer/>
				<m:Button icon="sap-icon://create" press=".onCreateRoot" tooltip="Create New Root"/>
				<m:Button icon="sap-icon://hide" press=".onCreateRoot($event, true)"
					tooltip="Create New Root (filtered out)"/>
				<m:Button icon="sap-icon://synchronize" id="synchronize" press="onSynchronize"
					tooltip="Side Effect"/>
				<m:Button icon="sap-icon://response" press="onRefresh" tooltip="Refresh"/>
				<m:Button icon="sap-icon://refresh" press="onRefresh($event, true)"
						tooltip="Refresh (keeping tree state)"/>
			</m:Toolbar>
		</extension>
		<rowMode>
			<rm:Interactive rowCount="5" minRowCount="2"/>
		</rowMode>
		<rowSettingsTemplate>
			<RowSettings highlight="{= %{@$ui5.context.isTransient} === undefined ? 'None' : 'Information' }"/>
		</rowSettingsTemplate>
		<Column hAlign="End" width="5em">
			<m:Label text="Level"/>
			<template>
				<m:Text text="{= %{@$ui5.node.level} }" wrapping="false"/>
			</template>
		</Column>
		<Column width="3.14em">
			<template>
				<m:Button enabled="{= %{@$ui5.node.isExpanded} !== undefined}"
					icon="{= %{@$ui5.node.isExpanded} === true
						? 'sap-icon://collapse'
						: (%{@$ui5.node.isExpanded} === false
							? 'sap-icon://expand' : 'sap-icon://e-care')}"
					id="expand"
					press=".onToggleExpand"
					tooltip="{= %{@$ui5.node.isExpanded} === true
						? 'Collapse'
						: (%{@$ui5.node.isExpanded} === false ? 'Expand' : 'Leaf')}"
					/>
			</template>
		</Column>
		<Column>
			<m:Label text="ID"/>
			<template>
				<m:Text text="{ID}" wrapping="false"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Manager's ID"/>
			<template>
				<m:Text text="{MANAGER_ID}" wrapping="false"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Name"/>
			<template>
				<m:Input id="name" value="{Name}" change="onNameChanged"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Age"/>
			<template>
				<m:Text text="{AGE}" wrapping="false"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Filtered Out"/>
			<template>
				<m:CheckBox editable="false" selected="{= %{STATUS} === 'Out'}"/>
			</template>
		</Column>
		<Column width="27em">
			<template>
				<m:FlexBox justifyContent="SpaceBetween">
					<m:Button enabled="{= %{STATUS} !== 'Out' &amp;&amp; %{@$ui5.node.isExpanded} !== false}"
						icon="sap-icon://create" id="create" press=".onCreate"
						tooltip="Create New Child"/>
					<m:Button enabled="{= %{STATUS} !== 'Out' &amp;&amp; %{@$ui5.node.isExpanded} !== false}"
						icon="sap-icon://hide" press=".onCreate($event, true)"
						tooltip="Create New Hidden Child"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://up"
						press=".onMoveUp" tooltip="Move Up"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://down"
						press=".onMoveDown" tooltip="Move Down"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://move"
						press=".onMove" tooltip="Move To Parent..."/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://map"
						press=".onMove($event, false, '?')" tooltip="Move Just Before Sibling..."/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://arrow-bottom"
						press=".onMove($event, false, null)" tooltip="Move As Last Child Of..."/>
					<m:Button enabled="{= %{STATUS} !== 'Out' &amp;&amp; %{@$ui5.node.level} > 1}"
						icon="sap-icon://back-to-top" press=".onMakeRoot" tooltip="Make Root"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://pull-down"
						press=".onMakeRoot($event, null)" tooltip="Make Last Root"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://delete"
						press=".onDelete" tooltip="Delete"/>
					<m:Button enabled="{= %{@$ui5.node.isExpanded} !== undefined}"
						icon="sap-icon://expand-group" press=".onExpandLevels"
						tooltip="Expand By Number Of Levels..."/>
					<m:CheckBox selected="{= %{@$ui5.context.isSelected}}" tooltip="Selected"/>
				</m:FlexBox>
			</template>
		</Column>
	</Table>

	<TreeTable id="treeTable" ariaLabelledBy="treeTitle"
		rows="{
				path : '/EMPLOYEES',
				parameters : {
					$count : false,
					$filter : 'STATUS ne \'Out\'',
					$orderby : 'AGE',
					$$patchWithoutSideEffects : true
				},
				suspended : true
			}"
		selectionMode="None">
		<extension>
			<m:Toolbar design="Transparent" class="sapMTBHeader-CTX">
				<m:Title id="treeTitle" level="H1" text="Organizational Chart - TreeTable"/>
				<m:ToolbarSpacer/>
				<m:Button icon="sap-icon://create" press=".onCreateRootInTreeTable"
					tooltip="Create New Root"/>
				<m:Button icon="sap-icon://hide" press=".onCreateRootInTreeTable($event, true)"
					tooltip="Create New Root (filtered out)"/>
				<m:Button icon="sap-icon://synchronize" id="synchronizeTreeTable"
					press="onSynchronizeTreeTable" tooltip="Side effect"/>
				<m:Button icon="sap-icon://response" press="onRefreshTreeTable" tooltip="Refresh"/>
				<m:Button icon="sap-icon://refresh" press="onRefreshTreeTable($event, true)"
					tooltip="Refresh (keeping tree state)"/>
			</m:Toolbar>
		</extension>
		<rowMode>
			<rm:Interactive rowCount="5" minRowCount="2"/>
		</rowMode>
		<rowSettingsTemplate>
			<RowSettings highlight="{= %{@$ui5.context.isTransient} === undefined ? 'None' : 'Information' }"/>
		</rowSettingsTemplate>
		<Column>
			<m:Label text="ID"/>
			<template>
				<m:Text text="{ID}" wrapping="false"/>
			</template>
		</Column>
		<Column hAlign="End" width="5em">
			<m:Label text="Level"/>
			<template>
				<m:Text text="{= %{@$ui5.node.level} }" wrapping="false"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Manager's ID"/>
			<template>
				<m:Text text="{MANAGER_ID}" wrapping="false"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Name"/>
			<template>
				<m:Input id="nameInTreeTable" value="{Name}" change="onNameChanged"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Age"/>
			<template>
				<m:Text text="{AGE}" wrapping="false"/>
			</template>
		</Column>
		<Column>
			<m:Label text="Filtered Out"/>
			<template>
				<m:CheckBox editable="false" selected="{= %{STATUS} === 'Out'}"/>
			</template>
		</Column>
		<Column width="27em">
			<template>
				<m:FlexBox justifyContent="SpaceBetween">
					<m:Button enabled="{= %{STATUS} !== 'Out' &amp;&amp; %{@$ui5.node.isExpanded} !== false}"
						icon="sap-icon://create" id="createInTreeTable" press=".onCreate"
						tooltip="Create New Child"/>
					<m:Button enabled="{= %{STATUS} !== 'Out' &amp;&amp; %{@$ui5.node.isExpanded} !== false}"
						icon="sap-icon://hide" press=".onCreate($event, true)"
						tooltip="Create New Child (filtered out)"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://up"
						press=".onMoveUp" tooltip="Move Up"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://down"
						press=".onMoveDown" tooltip="Move Down"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://move"
						press=".onMove($event, true)" tooltip="Move To Parent..."/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://map"
						press=".onMove($event, true, '?')" tooltip="Move Just Before Sibling..."/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://arrow-bottom"
						press=".onMove($event, true, null)" tooltip="Move As Last Child Of..."/>
					<m:Button enabled="{= %{STATUS} !== 'Out' &amp;&amp; %{@$ui5.node.level} > 1}"
						icon="sap-icon://back-to-top" press=".onMakeRoot" tooltip="Make Root"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://pull-down"
						press=".onMakeRoot($event, null)" tooltip="Make Last Root"/>
					<m:Button enabled="{= %{STATUS} !== 'Out'}" icon="sap-icon://delete"
						press=".onDelete" tooltip="Delete"/>
					<m:Button enabled="{= %{@$ui5.node.isExpanded} !== undefined}"
						icon="sap-icon://expand-group" press=".onExpandLevels"
						tooltip="Expand By Number Of Levels..."/>
					<m:CheckBox selected="{= %{@$ui5.context.isSelected}}" tooltip="Selected"/>
				</m:FlexBox>
			</template>
		</Column>
	</TreeTable>

	<mvc:dependents>
		<m:SelectDialog confirm=".onMoveConfirm" draggable="true" id="moveDialog"
			items="{path : '/EMPLOYEES', parameters : {$count : true}, suspended : true}"
			title="Select New Parent For {ID} ({Name})">
			<m:StandardListItem title="{ID} ({Name})" type="Active" />
		</m:SelectDialog>
	</mvc:dependents>

	<mvc:dependents>
		<m:Dialog draggable="true" id="expandLevelsDialog"
			title="Expand Node {ID} ({Name}) By Levels">
			<m:HBox alignItems="Center" justifyContent="Center">
				<m:Label labelFor="expandLevels" text="Levels" width="4em"/>
				<m:Input id="expandLevels" tooltip="* means expand all" value="3" width="4em"/>
			</m:HBox>
			<m:beginButton>
				<m:Button press=".onExpandLevelsConfirm" text="Expand" type="Accept"/>
			</m:beginButton>
			<m:endButton>
				<m:Button press=".onExpandLevelsCancel" text="Cancel" type="Reject"/>
			</m:endButton>
		</m:Dialog>
	</mvc:dependents>

	<m:FormattedText htmlText="&lt;em>Available URL parameters:&lt;/em>
		&lt;ul>
			&lt;li> &lt;code>createInPlace&lt;/code> Either set or unset; default unset
			&lt;li> &lt;code>expandTo&lt;/code> Either * for &lt;em>expand all&lt;/em> or a number; default 3
			&lt;li> &lt;code>firstVisibleRow&lt;/code> A number; default 0
			&lt;li> &lt;code>threshold&lt;/code> A number; default 0
			&lt;li> &lt;code>visibleRowCount&lt;/code> A number; default 5
			&lt;li> &lt;code>TreeTable&lt;/code> Y for yes, N for no; default is both tables"/>
</mvc:View>
