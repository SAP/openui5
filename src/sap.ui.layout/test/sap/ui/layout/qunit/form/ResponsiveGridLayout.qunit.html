<!DOCTYPE HTML>
<!--
  Tested control/class: sap.ui.layout.form.ResponsiveGridLayout
  Author: SAP
-->

<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<script src="../../shared-config.js"></script>
	<script id="sap-ui-bootstrap"
		src="../../../../../../resources/sap-ui-core.js"
		data-sap-ui-noConflict="true"
		data-sap-ui-libs="sap.ui.layout, sap.m">
	</script>
	<link rel="stylesheet" href="../../../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen">
	<script src="../../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
	<script src="../../../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
	<script src="../../../../../../resources/sap/ui/qunit/qunit-coverage.js"></script>
	<script src="../../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>

	<script>

		// create Form

		var oLayout1 = new sap.ui.layout.form.ResponsiveGridLayout("Layout1");
		var oForm1 = new sap.ui.layout.form.Form("F1",{
			title: new sap.ui.core.Title("F1T",{text: "Form1"}),
			editable: true,
			layout: oLayout1,
			formContainers: [
				new sap.ui.layout.form.FormContainer("F1C1",{
						formElements: [
							new sap.ui.layout.form.FormElement("F1C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F1C1E1_T1",{value: "Text"})]
								})
							]
					})
				]
			}).placeAt("uiArea1");

		var oLayout2 = new sap.ui.layout.form.ResponsiveGridLayout("Layout2",  {
			singleContainerFullSize: false,
			backgroundDesign: sap.ui.layout.BackgroundDesign.Transparent
		});
		var oForm2 = new sap.ui.layout.form.Form("F2",{
			title: "Form2",
			editable: true,
			layout: oLayout2,
			formContainers: [
				new sap.ui.layout.form.FormContainer("F2C1",{
						title: "Title as text",
						formElements: [
							new sap.ui.layout.form.FormElement("F2C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F2C1E1_T1",{value: "Text"}),
									         new sap.m.Input("F2C1E1_T2",{value: "Text"})]
								})
							]
					})
				]
			}).placeAt("uiArea2");

		var oLayout3 = new sap.ui.layout.form.ResponsiveGridLayout("Layout3", {
			backgroundDesign: sap.ui.layout.BackgroundDesign.Solid
		});
		var oForm3 = new sap.ui.layout.form.Form("F3",{
			title: "Form3",
			editable: true,
			layout: oLayout3,
			formContainers: [
				new sap.ui.layout.form.FormContainer("F3C1",{
						title: new sap.ui.core.Title("F3C1T",{text: "Title as Control"}),
						formElements: [
							new sap.ui.layout.form.FormElement("F3C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F3C1E1_T1",{value: "Text"}),
									         new sap.m.Input("F3C1E1_T2",{value: "Text"})]
								}),
							new sap.ui.layout.form.FormElement("F3C1E2",{
									label: new sap.m.Label("F3C1E2_L2",{text: "Label",
															layoutData: new sap.ui.layout.GridData("F3C1E2_L2_LD",{span: "L3 M3 S12"})}),
									fields: [new sap.m.Input("F3C1E2_T1",{value: "Text"}),
									         new sap.m.Input("F3C1E2_T2",{value: "Text"})]
								})
							]
					}),
				new sap.ui.layout.form.FormContainer("F3C2",{
						title: "Title as Text",
						expandable: true,
						formElements: [
							new sap.ui.layout.form.FormElement("F3C2E1",{
									fields: [new sap.m.Input("F3C2E1_T1",{value: "Text without label"}),
									         new sap.m.Input("F3C2E1_T2",{value: "Text without label"})]
								}),
							new sap.ui.layout.form.FormElement("F3C2E2",{
									label: "Label",
									fields: [new sap.m.Input("F3C2E2_T1",{value: "Text"}),
									         new sap.m.Input("F3C2E2_T2",{value: "Text",
																layoutData: new sap.ui.layout.GridData("F3C2E2_T2LD",{span: "L2 M2 S2"})
														})]
								}),
							new sap.ui.layout.form.FormElement("F3C2E3",{
									visible: false,
									label: "Label",
									fields: [new sap.m.Input("F3C2E3_T1",{value: "invisible"})]
								})
							],
						layoutData: new sap.ui.layout.GridData("F3C2LD",{span: "L6 M12 S12"})
					}),
				new sap.ui.layout.form.FormContainer("F3C3",{
						title: "Title as Text",
						expandable: true,
						expanded: false,
						formElements: [
							new sap.ui.layout.form.FormElement("F3C3E1",{
									label: "Label",
									fields: [new sap.m.Input("F3C3E1_T1",{value: "Text"}),
									         new sap.m.Input("F3C3E1_T2",{value: "Text"})]
								}),
							new sap.ui.layout.form.FormElement("F3C3E2",{
									label: "Label",
									fields: [new sap.m.Input("F3C3E2_T1",{value: "Text"}),
									         new sap.m.Input("F3C3E2_T2",{value: "Text"})]
								})
							],
						layoutData: new sap.ui.core.VariantLayoutData("F3C3VLD",{
														multipleLayoutData: [new sap.ui.core.LayoutData(),
														                     new sap.ui.layout.GridData("F3C3LD",{span: "L6 M12 S12"})]})
					}),
				new sap.ui.layout.form.FormContainer("F3C5",{
						title: "Invisible",
						visible: false,
						formElements: [
							new sap.ui.layout.form.FormElement("F3C5E1",{
									label: "Label",
									fields: [new sap.m.Input("F3C5E1_T1",{value: "Text"})]
								})
							]
					}),
				new sap.ui.layout.form.FormContainer("F3C6",{
					formElements: [
						new sap.ui.layout.form.FormElement("F3C6E1",{
								label: "Label",
								fields: [new sap.m.Input("F3C6E1_T1",{value: "Text"})]
							})
						]
					})
				]
			}).placeAt("uiArea3");

			// special case, only one container visible, but not the first one
		var oLayout4 = new sap.ui.layout.form.ResponsiveGridLayout("Layout4");
		var oForm4 = new sap.ui.layout.form.Form("F4",{
			title: "Form4",
			editable: true,
			layout: oLayout4,
			formContainers: [
				new sap.ui.layout.form.FormContainer("F4C1",{
						title: "container 1",
						visible: false,
						formElements: [
							new sap.ui.layout.form.FormElement("F4C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F4C1E1_T1")]
								})]
					}),
				new sap.ui.layout.form.FormContainer("F4C2",{
						title: "container 2",
						visible: true,
						formElements: [
							new sap.ui.layout.form.FormElement("F4C2E1",{
									label: "Label",
									fields: [new sap.m.Input("F4C2E1_T1")]
								})]
					})]
			}).placeAt("uiArea4");

		// test label span without adjusting
		var oLayout5 = new sap.ui.layout.form.ResponsiveGridLayout("Layout5", {
			labelSpanL: 4,
			columnsM: 2,
			labelSpanM: 12,
			adjustLabelSpan: false
		});
		var oForm5 = new sap.ui.layout.form.Form("F5",{
			title: "Form5",
			editable: true,
			layout: oLayout5,
			width: "800px",
			formContainers: [
				new sap.ui.layout.form.FormContainer("F5C1",{
						title: "container 1",
						formElements: [
							new sap.ui.layout.form.FormElement("F5C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F5C1E1_T1")]
								})]
					}),
				new sap.ui.layout.form.FormContainer("F5C2",{
						title: "container 2",
						formElements: [
							new sap.ui.layout.form.FormElement("F5C2E1",{
									label: "Label",
									fields: [new sap.m.Input("F5C2E1_T1")]
								})]
					})]
			}).placeAt("uiArea5");

		// test toolbar as header
		var oLayout6 = new sap.ui.layout.form.ResponsiveGridLayout("Layout6");
		var oForm6 = new sap.ui.layout.form.Form("F6",{
			editable: true,
			title: new sap.ui.core.Title("F6-T",{text: "Form6"}),
			toolbar: new sap.m.Toolbar("F6-TB1", {
				content: [new sap.m.Title("F6-Title", {text: "Form 6", level: sap.ui.core.TitleLevel.H3, titleStyle: sap.ui.core.TitleLevel.H3, tooltip: "Title tooltip"}),
				          new sap.m.ToolbarSpacer(),
				          new sap.m.Button({icon: "sap-icon://sap-ui5"})]
			}),
			ariaLabelledBy: "F6-Title",
			layout: oLayout6,
			formContainers: [
				new sap.ui.layout.form.FormContainer("F6C1",{
						title: new sap.ui.core.Title("F6-C1T",{text: "Container 1"}),
						toolbar: new sap.m.Toolbar("F6-TB2", {
							content: [new sap.m.Title("F6C1-Title", {text: "Container 1", level: sap.ui.core.TitleLevel.H4, titleStyle: sap.ui.core.TitleLevel.H4, tooltip: "Title tooltip"}),
							          new sap.m.ToolbarSpacer(),
							          new sap.m.Button({icon: "sap-icon://sap-ui5"})]
						}),
						ariaLabelledBy: "F6C1-Title",
						formElements: [
							new sap.ui.layout.form.FormElement("F6C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F6C1E1_T1")]
								})]
					}),
				new sap.ui.layout.form.FormContainer("F6C2",{
						toolbar: new sap.m.Toolbar("F6-TB3", {
							content: [new sap.m.Title("F6C2-Title", {text: "Container 2", level: sap.ui.core.TitleLevel.H4, titleStyle: sap.ui.core.TitleLevel.H4, tooltip: "Title tooltip"}),
							          new sap.m.ToolbarSpacer(),
							          new sap.m.Button({icon: "sap-icon://sap-ui5"})]
						}),
						formElements: [
							new sap.ui.layout.form.FormElement("F6C2E1",{
									label: "Label",
									fields: [new sap.m.Input("F6C2E1_T1")]
								})]
					})]
			}).placeAt("uiArea6");

		// more fields than fit to line
		var oLayout7 = new sap.ui.layout.form.ResponsiveGridLayout("Layout7");
		var oForm7 = new sap.ui.layout.form.Form("F7",{
			editable: true,
			title: "Form7",
			layout: oLayout7,
			formContainers: [
				new sap.ui.layout.form.FormContainer("F7C1",{
						title: "Container 1",
						formElements: [
							new sap.ui.layout.form.FormElement("F7C1E1",{
									label: "Label",
									fields: [new sap.m.Input("F7C1E1_T1"),
									         new sap.m.Input("F7C1E1_T2", {layoutData: new sap.ui.layout.GridData("F7C1E1_T2LD", {span: "XL3 L3 M3 S3"})}),
									         new sap.m.Input("F7C1E1_T3"),
									         new sap.m.Input("F7C1E1_T4"),
									         new sap.m.Input("F7C1E1_T5"),
									         new sap.m.Input("F7C1E1_T6"),
									         new sap.m.Input("F7C1E1_T7"),
									         new sap.m.Input("F7C1E1_T8"),
									         new sap.m.Input("F7C1E1_T9")]
								})]
					}),
				new sap.ui.layout.form.FormContainer("F7C2",{
						title: "Container 2",
						formElements: [
							new sap.ui.layout.form.FormElement("F7C2E1",{
									label: "Label",
									fields: [new sap.m.Input("F7C2E1_T1")]
								})]
					})]
			}).placeAt("uiArea7");

		// test functions
		qutils.delayTestStart();

		QUnit.module("functions");

		QUnit.test("Getter", function(assert) {
			// overwritten getter must return data of corresponding objects
			var oContainer = sap.ui.getCore().byId("F1C1");
			var oElement = sap.ui.getCore().byId("F1C1E1");
			var oGrid = sap.ui.getCore().byId("F1C1--Grid");
			assert.equal(oGrid.getContent()[0].getParent().getId(), oElement.getId(), "Form1: Element must be still parent of Label");
			assert.equal(oGrid.getContent()[1].getParent().getId(), oElement.getId(), "Form1: Element must be still parent of Field");

			var oPanel = sap.ui.getCore().byId("F2C1---Panel");
			var oContainer = sap.ui.getCore().byId("F2C1");
			var oElement = sap.ui.getCore().byId("F2C1E1");
			var oGrid = sap.ui.getCore().byId("F2C1--Grid");
			assert.equal(oGrid.getContent()[0].getParent().getId(), oElement.getId(), "Form2: Element must be still parent of Label");
			assert.equal(oGrid.getContent()[1].getParent().getId(), oElement.getId(), "Form2: Element must be still parent of Field");

			oPanel = sap.ui.getCore().byId("F3C1---Panel");
			oContainer = sap.ui.getCore().byId("F3C1");
			assert.equal(oContainer.getTitle().getParent().getId(), oContainer.getId(), "Form3: Container3 Title must still have Container as Parent");

			oPanel = sap.ui.getCore().byId("F3C2---Panel");
			oContainer = sap.ui.getCore().byId("F3C2");
			var oLayoutData = sap.ui.getCore().byId("F3C2LD");
			assert.equal(oPanel.getLayoutData().getId(), oLayoutData.getId(), "Form3: Panel2 must get LayoutData from Container");
			assert.equal(oLayoutData.getParent().getId(), oContainer.getId(), "Form3: Container2 LayoutData must still have Container as Parent");

			oPanel = sap.ui.getCore().byId("F3C3---Panel");
			oContainer = sap.ui.getCore().byId("F3C3");
			oLayoutData = sap.ui.getCore().byId("F3C3LD");
			assert.equal(oPanel.getLayoutData().getId(), oLayoutData.getId(), "Form3: Panel3 must get LayoutData from Container");
		});

		QUnit.test("LayoutData calculation", function(assert) {
			var oElement = sap.ui.getCore().byId("F1C1E1");
			var oLabel = oElement.getLabelControl();
			var oGrid = sap.ui.getCore().byId("F1C1--Grid");
			oLayoutData = oGrid._getLayoutDataForControl(oLabel);
			assert.equal(oLayoutData.getId(), "Layout1--Dummy", "Form1: Label1 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL2 L2 M2 S12", "Form1: Label1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), true, "Form1: Label1 calculated LayoutData linebreak correct");

			var oField = sap.ui.getCore().byId("F1C1E1_T1");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout1--Dummy", "Form1: Field1 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL10 L10 M10 S12", "Form1: Field1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form1: Field1 calculated LayoutData linebreak correct");

			var oPanel = sap.ui.getCore().byId("F3C1---Panel");
			var oLayoutData = oPanel.getLayoutData();
			assert.equal(oLayoutData.getId(), "F3C1---Panel--LD", "Form3: Panel1 must use calculated LayoutData");
			assert.equal(oLayoutData.getLinebreakL(), true, "Form3: Panel1 calculated LayoutData linebreakL correct");

			oElement = sap.ui.getCore().byId("F3C1E1");
			oLabel = oElement.getLabelControl();
			oGrid = sap.ui.getCore().byId("F3C1--Grid");
			oLayoutData = oGrid._getLayoutDataForControl(oLabel);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Label1 must use calculated LayoutData");
			assert.equal(oLayoutData._getEffectiveSpanLarge(), 4, "Form3: Label1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), true, "Form3: Label1 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C1E1_T1");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Field1 must use calculated LayoutData");
			assert.equal(oLayoutData._getEffectiveSpanLarge(), 4, "Form3: Field1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form3: Field1 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C1E1_T2");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Field2 must use calculated LayoutData");
			assert.equal(oLayoutData._getEffectiveSpanLarge(), 4, "Form3: Field2 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form3: Field2 calculated LayoutData linebreak correct");

			oLabel = sap.ui.getCore().byId("F3C1E2_L2");
			oLayoutData = oGrid._getLayoutDataForControl(oLabel);
			assert.equal(oLayoutData.getId(), "F3C1E2_L2_LD", "Form3: Label2 must use given LayoutData");

			oField = sap.ui.getCore().byId("F3C1E2_T1");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Field3 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL5 L5 M5 S12", "Form3: Field3 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form3: Field3 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C1E2_T2");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Field4 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL4 L4 M4 S12", "Form3: Field4 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form3: Field4 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C2E1_T1");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Container2 Field1 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL6 L6 M6 S12", "Form3: Container2 Field1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), true, "Form3: Container2 Field1 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C2E1_T2");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Container2 Field2 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL6 L6 M6 S12", "Form3: Container2 Field2 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form3: Container2 Field2 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C2E2_T1");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout3--Dummy", "Form3: Container2 Field3 must use calculated LayoutData");
			assert.equal(oLayoutData._getEffectiveSpanLarge(), 6, "Form3: Container2 Field3 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), false, "Form3: Container2 Field3 calculated LayoutData linebreak correct");

			oField = sap.ui.getCore().byId("F3C2E2_T2");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "F3C2E2_T2LD", "Form3: Container2 Field3 must use given LayoutData");

			oElement = sap.ui.getCore().byId("F5C1E1");
			oLabel = oElement.getLabelControl();
			oGrid = sap.ui.getCore().byId("F5C1--Grid");
			oLayoutData = oGrid._getLayoutDataForControl(oLabel);
			assert.equal(oLayoutData.getId(), "Layout5--Dummy", "Form5: Label1 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL4 L4 M12 S12", "Form5: Label1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreak(), true, "Form5: Label1 calculated LayoutData linebreak correct");

			// more fields than fit in row
			oElement = sap.ui.getCore().byId("F7C1E1");
			oGrid = sap.ui.getCore().byId("F7C1--Grid");
			oField = sap.ui.getCore().byId("F7C1E1_T1");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout7--Dummy", "Form7: Field1 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL1 L1 M1 S12", "Form7: Field1 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreakXL(), false, "Form7: Field1 calculated LayoutData linebreakXL correct");

			oField = sap.ui.getCore().byId("F7C1E1_T2");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "F7C1E1_T2LD", "Form7: Field2 must use given LayoutData");

			oField = sap.ui.getCore().byId("F7C1E1_T3");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout7--Dummy", "Form7: Field3 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL1 L1 M1 S12", "Form7: Field3 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreakXL(), false, "Form7: Field3 calculated LayoutData linebreakXL correct");
			assert.equal(oLayoutData.getLinebreakL(), false, "Form7: Field3 calculated LayoutData linebreakL correct");
			assert.equal(oLayoutData.getLinebreakM(), false, "Form7: Field3 calculated LayoutData linebreakM correct");
			assert.equal(oLayoutData.getIndentXL(), 0, "Form7: Field3 calculated LayoutData indentXL correct");
			assert.equal(oLayoutData.getIndentL(), 0, "Form7: Field3 calculated LayoutData indentL correct");
			assert.equal(oLayoutData.getIndentM(), 0, "Form7: Field3 calculated LayoutData indentM correct");

			oField = sap.ui.getCore().byId("F7C1E1_T7");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout7--Dummy", "Form7: Field7 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL4 L4 M1 S12", "Form7: Field7 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreakXL(), true, "Form7: Field7 calculated LayoutData linebreakXL correct");
			assert.equal(oLayoutData.getLinebreakL(), true, "Form7: Field7 calculated LayoutData linebreakL correct");
			assert.equal(oLayoutData.getLinebreakM(), false, "Form7: Field7 calculated LayoutData linebreakM correct");
			assert.equal(oLayoutData.getIndentXL(), 4, "Form7: Field7 calculated LayoutData indentXL correct");
			assert.equal(oLayoutData.getIndentL(), 4, "Form7: Field7 calculated LayoutData indentL correct");
			assert.equal(oLayoutData.getIndentM(), 0, "Form7: Field7 calculated LayoutData indentM correct");

			oField = sap.ui.getCore().byId("F7C1E1_T9");
			oLayoutData = oGrid._getLayoutDataForControl(oField);
			assert.equal(oLayoutData.getId(), "Layout7--Dummy", "Form7: Field9 must use calculated LayoutData");
			assert.equal(oLayoutData.getSpan(), "XL2 L2 M10 S12", "Form7: Field9 calculated LayoutData span correct");
			assert.equal(oLayoutData.getLinebreakXL(), false, "Form7: Field9 calculated LayoutData linebreakXL correct");
			assert.equal(oLayoutData.getLinebreakL(), false, "Form7: Field9 calculated LayoutData linebreakL correct");
			assert.equal(oLayoutData.getLinebreakM(), true, "Form7: Field9 calculated LayoutData linebreakM correct");
			assert.equal(oLayoutData.getIndentXL(), 0, "Form7: Field9 calculated LayoutData indentXL correct");
			assert.equal(oLayoutData.getIndentL(), 0, "Form7: Field9 calculated LayoutData indentL correct");
			assert.equal(oLayoutData.getIndentM(), 2, "Form7: Field9 calculated LayoutData indentM correct");
		});

		QUnit.test("DOM representation", function(assert) {
			var oContainer = sap.ui.getCore().byId("F1C1");
			assert.equal(oContainer.getRenderedDomRef().id, "F1C1--Grid", "Form1: Container1 ResponsiveFlowLayout is DOM representation");
			oContainer = sap.ui.getCore().byId("F2C1");
			assert.equal(oContainer.getRenderedDomRef().id, "F2C1---Panel", "Form2: Container1 Panel is DOM representation");
			oContainer = sap.ui.getCore().byId("F3C5");
			assert.ok(!oContainer.getRenderedDomRef(), "Form3: invisible Container5 no DOM representation");

			var oElement = sap.ui.getCore().byId("F1C1E1");
			assert.ok(!oElement.getRenderedDomRef(), "no DOM representation rendered for FormElements");
		});

		QUnit.module("Rendering");

		QUnit.test("BackgroundDesign", function(assert) {
			assert.ok(jQuery("#Layout1").hasClass("sapUiFormBackgrTranslucent"), "Form1: translucent design per default");
			assert.ok(!jQuery("#Layout2").hasClass("sapUiFormBackgrTranslucent"), "Form2: no translucent design");
			assert.ok(!jQuery("#Layout2").hasClass("sapUiFormBackgrSolid"), "Form2: no solid design");
			assert.ok(jQuery("#Layout3").hasClass("sapUiFormBackgrSolid"), "Form1: solid design");
		});

		QUnit.test("Container rendering", function(assert) {
			assert.ok(jQuery.sap.domById("F1"), "Form1 is rendered");
			assert.ok(jQuery.sap.domById("Layout1"), "Layout1 is rendered");
			assert.ok(!jQuery.sap.domById("F1--Grid"), "Form1: no Main-Grid rendered as only one container");
			assert.ok(!jQuery.sap.domById("F1C1---Panel"), "Form1: Container1 no Panel rendered (because no title and expander)");
			assert.ok(jQuery.sap.domById("F1C1--Grid"), "Form1: Container1 Grid rendered");

			// panel
			assert.ok(jQuery.sap.domById("F2--Grid"), "Form2: Main-Grid rendered as singleContainerFullSize disabled");
			assert.ok(jQuery.sap.domById("F2C1---Panel"), "Form2: Container1 Panel rendered (because title)");
			assert.ok(jQuery.sap.domById("F2C1--Grid"), "Form2: Container1 Grid rendered");
			// title as text
			var oContainer = sap.ui.getCore().byId("F2C1");
			assert.ok(jQuery.sap.domById("F2C1--title"), "Form2: Container1 Title rendered");
			assert.equal(jQuery.sap.byId("F2C1--title").text(), oContainer.getTitle(), "Form2: Container1 Title Text");
			// title as control
			oContainer = sap.ui.getCore().byId("F3C1");
			var sTitleId = oContainer.getTitle().getId();
			assert.ok(jQuery.sap.domById(sTitleId), "Form3: Container1 Title rendered");
			assert.equal(jQuery.sap.byId(sTitleId).text(), oContainer.getTitle().getText(), "Form3: Container1 Title Text");
			// expander
			assert.ok(!jQuery.sap.domById("F3C1--Exp"), "Form3: Container1 no expander rendered");
			assert.ok(jQuery.sap.domById("F3C2--Exp"), "Form3: Container2 expander rendered");

			assert.ok(!jQuery.sap.domById("F3C5---Panel"), "Form3: invisible Container5 - Panel not rendered");
			assert.ok(!jQuery.sap.domById("F3C5--Grid"), "Form3: invisible Container5 - Grid not rendered");

			assert.ok(!jQuery.sap.domById("F4--Grid"), "Form4: no Main-Grid rendered as only one container visible");
			assert.ok(!jQuery.sap.domById("F4C1---Panel"), "Form4: invisible Container1 - Panel not rendered");
			assert.ok(!jQuery.sap.domById("F4C1--Grid"), "Form4: invisible Container1 - Grid not rendered");
			assert.ok(jQuery.sap.domById("F4C2---Panel"), "Form4: Container2 Panel rendered");
			assert.ok(jQuery.sap.domById("F4C2--Grid"), "Form4: Container2 Grid rendered");
		});

		QUnit.test("Fields Rendering", function(assert) {
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F1C1E1").getLabelControl().getId()), "Label1 rendered");
			assert.ok(jQuery.sap.domById("F1C1E1_T1"), "Input1 rendered");

			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F2C1E1").getLabelControl().getId()), "Form2: Label rendered");
			assert.ok(jQuery.sap.domById("F2C1E1_T1"), "Form2: Input1 rendered");
			assert.ok(jQuery.sap.domById("F2C1E1_T2"), "Form2: Input2 rendered");

			assert.ok(!jQuery.sap.domById("F3C2E3_T1"), "Form3: invisible Element - Input not rendered");
			assert.ok(!jQuery.sap.domById("F3C5E1_T1"), "Form3: invisible Container - Input not rendered");
		});

		QUnit.test("Aria", function(assert) {
			assert.ok(!jQuery("#F1C1--Grid").attr("role"), "Container-F1C1: role \"form\" not set on grid level");
			assert.ok(!jQuery("#F1C1--Grid").attr("aria-labelledby"), "Container-F1C1: aria-labelledby not set on grid level");
			assert.equal(jQuery("#F2C1---Panel").attr("role"), "form", "Container-F2C1: role \"form\" set on panel level");
			assert.ok(!jQuery("#F2C1--Grid").attr("role"), "Container-F2C1: role \"form\" not set on grid level");
			assert.equal(jQuery("#F2C1---Panel").attr("aria-labelledby"), "F2C1--title", "Container-F2C1: aria-labelledby set");
			assert.equal(jQuery("#F3C1---Panel").attr("aria-labelledby"), "F3C1T", "Container-F3C1: aria-labelledby set");
			assert.equal(jQuery("#F3C6--Grid").attr("role"), "form", "Container-F3C6: role \"form\" set on grid level");

			assert.equal(jQuery("#F6").attr("aria-labelledby"), "F6-Title", "Form6: aria-labelledby set");
			assert.equal(jQuery("#F6C1---Panel").attr("aria-labelledby"), "F6C1-Title", "Container-F6C1: aria-labelledby set");
			assert.equal(jQuery("#F6C2---Panel").attr("aria-labelledby"), "F6-TB3", "Container-F6C2: aria-labelledby default set");
		});

		QUnit.test("Toolbar", function(assert) {
			assert.ok(!jQuery.sap.domById("F6-T"), "Form6: Title not rendered");
			assert.ok(jQuery.sap.domById("F6-TB1"), "Form6: Toolbar rendered");
			assert.ok(!jQuery.sap.domById("F6-C1T"), "Form6: Title of Container1 not rendered");
			assert.ok(jQuery.sap.domById("F6-TB2"), "Form6: Toolbar of Container1 rendered");
			assert.ok(jQuery.sap.domById("F6-TB3"), "Form6: Toolbar of Container2 rendered");
		});

		QUnit.module("Interaction");

		QUnit.test("add container", function(assert) {
			oForm3.addFormContainer(
				new sap.ui.layout.form.FormContainer("F3C4",{
						title: "new container",
						formElements: [
							new sap.ui.layout.form.FormElement("F3C4E1",{
									label: "Label",
									fields: [new sap.m.Input("F3C4E1_T1",{value: "Text"}),
									         new sap.m.Input("F3C4E1_T2",{value: "Text"})]
								})
							]
					})
				);
			sap.ui.getCore().applyChanges();
			assert.ok(jQuery.sap.domById("F3C4---Panel"), "Form3: new Container Panel rendered (because title)");
			assert.ok(jQuery.sap.domById("F3C4--Grid"), "Form3: new Container Grid rendered");
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F3C4E1").getLabelControl().getId()), "Form3: new Label1 rendered");
			assert.ok(jQuery.sap.domById("F3C4E1_T1"), "Form3: new Input1 rendered");
		});

		QUnit.test("add element", function(assert) {
			var oContainer = sap.ui.getCore().byId("F3C4");
			oContainer.addFormElement(
					new sap.ui.layout.form.FormElement("F3C4E2",{
						label: "Label",
						fields: [new sap.m.Input("F3C4E2_T1",{value: "Text"})]
					})
				);
			sap.ui.getCore().applyChanges();
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form3: new Label2 rendered");
			assert.ok(jQuery.sap.domById("F3C4E2_T1"), "Form3: new Input1 rendered");
		});

		QUnit.test("add field", function(assert) {
			var oElement = sap.ui.getCore().byId("F3C4E2");
			oElement.addField(new sap.m.Input("F3C4E2_T2",{value: "Text"}));
			sap.ui.getCore().applyChanges();
			assert.ok(jQuery.sap.domById("F3C4E2_T1"), "Form3: new still Input1 rendered");
			assert.ok(jQuery.sap.domById("F3C4E2_T2"), "Form3: new Input2 rendered");
		});

		QUnit.test("make Element invisible", function(assert) {
			oElement = sap.ui.getCore().byId("F3C4E2");
			oElement.setVisible(false);
			sap.ui.getCore().applyChanges();
			assert.ok(!jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form3: Label2 not longer rendered");
			assert.ok(!jQuery.sap.domById("F3C4E2_T1"), "Form3: Input1 not longer rendered");
		});

		QUnit.test("make Element visible", function(assert) {
			oElement = sap.ui.getCore().byId("F3C4E2");
			oElement.setVisible(true);
			sap.ui.getCore().applyChanges();
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form3: Label2 rendered");
			assert.ok(jQuery.sap.domById("F3C4E2_T1"), "Form3: Input1 rendered");
		});

		QUnit.test("make Container invisible", function(assert) {
			oContainer = sap.ui.getCore().byId("F3C4");
			oContainer.setVisible(false);
			sap.ui.getCore().applyChanges();
			assert.ok(!sap.ui.getCore().byId("F3C4---Panel"), "Form3: Containers Panel does not exist any more.");
			assert.ok(!sap.ui.getCore().byId("F3C4--Grid"), "Form3: Grid for Container content does not exist any more.");
			assert.ok(!jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form3: Label2 not longer rendered");
			assert.ok(!jQuery.sap.domById("F3C4E2_T1"), "Form3: Input1 not longer rendered");
		});

		QUnit.test("make Container visible", function(assert) {
			oContainer = sap.ui.getCore().byId("F3C4");
			oContainer.setVisible(true);
			sap.ui.getCore().applyChanges();
			assert.ok(sap.ui.getCore().byId("F3C4---Panel"), "Form3: Containers Panel exist again.");
			assert.ok(sap.ui.getCore().byId("F3C4--Grid"), "Form3: Grid for Container exist again.");
			assert.ok(jQuery.sap.domById("F3C4---Panel"), "Form3: Containers Panel rendered");
			assert.ok(jQuery.sap.domById("F3C4--Grid"), "Form3: Containers Grid rendered");
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form3: Label2 rendered");
			assert.ok(jQuery.sap.domById("F3C4E2_T1"), "Form3: Input1 rendered");
		});

		QUnit.test("destroy and add container new", function(assert) {
			var oContainer = sap.ui.getCore().byId("F3C4");
			var aFormElements = oContainer.removeAllFormElements();
			oContainer.destroy();
			oForm3.addFormContainer(
				new sap.ui.layout.form.FormContainer("F3C4",{
						title: "new container",
						formElements: aFormElements
					})
				);
			sap.ui.getCore().applyChanges();
			assert.ok(jQuery.sap.domById("F3C4---Panel"), "Form3: Container Panel still rendered");
			assert.ok(jQuery.sap.domById("F3C4--Grid"), "Form3: Container Grid still rendered");
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F3C4E1").getLabelControl().getId()), "Form3: Label1 still rendered");
			assert.ok(jQuery.sap.domById("F3C4E1_T1"), "Form3: Input1 still rendered");
		});

		QUnit.test("destroy and add element new", function(assert) {
			var oElement = sap.ui.getCore().byId("F3C4E2");
			oElement.destroy();
			var oContainer = sap.ui.getCore().byId("F3C4");
			oContainer.addFormElement(
					new sap.ui.layout.form.FormElement("F3C4E2",{
						label: "Label",
						fields: [new sap.m.Input("F3C4E2_T1",{value: "Text"})]
					})
				);
			sap.ui.getCore().applyChanges();
			assert.ok(jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form3: Label2 still rendered");
			assert.ok(jQuery.sap.domById("F3C4E2_T1"), "Form3: Input1 still rendered");
		});

		QUnit.test("remove field", function(assert) {
			var oElement = sap.ui.getCore().byId("F3C4E2");
			oElement.removeField("F3C4E2_T1");
			sap.ui.getCore().applyChanges();
			assert.ok(!jQuery.sap.domById("F3C4E2_T1"), "Form4: new Input1 not longer rendered");
		});

		QUnit.test("remove element", function(assert) {
			var oContainer = sap.ui.getCore().byId("F3C4");
			oContainer.removeFormElement("F3C4E2");
			sap.ui.getCore().applyChanges();
			assert.ok(!jQuery.sap.domById(sap.ui.getCore().byId("F3C4E2").getLabelControl().getId()), "Form4: new Label2 not longer rendered");
			assert.ok(!jQuery.sap.domById("F3C4E2_T1"), "Form4: new Input1 not longer rendered");
		});

		QUnit.test("remove container", function(assert) {
			oForm3.removeFormContainer("F3C4");
			sap.ui.getCore().applyChanges();
			assert.ok(!jQuery.sap.domById("F3C4---Panel"), "Form3: new Container Panel not longer rendered rendered");
			assert.ok(!jQuery.sap.domById("F3C4--Grid"), "Form3: new Container Grid not longer rendered");
			assert.ok(!jQuery.sap.domById(sap.ui.getCore().byId("F3C4E1").getLabelControl().getId()), "Form4: new Label1 not longer rendered");
			assert.ok(!jQuery.sap.domById("F3C4E1_T1"), "Form4: new Input1 not longer rendered rendered");
			assert.ok(!oLayout3.mContainers["F3C4"], "Container not longer in the layout control data");
			assert.ok(!sap.ui.getCore().byId("F3C4--Grid"), "Container Grid destroyed");
			assert.ok(!sap.ui.getCore().byId("F3C4---Panel"), "Panel destroyed");
		});

		QUnit.test("destroy layout", function(assert) {
			oForm3.setLayout("");
			oLayout3.destroy();
			var iLength = 0;

			if (!Object.keys) {
				jQuery.each(oLayout3.mContainers, function(){iLength++});
			} else {
				iLength = Object.keys(oLayout3.mContainers).length;
			}
			assert.equal(iLength, 0, "Layout control data cleared");
			assert.ok(!sap.ui.getCore().byId("F3C1--Grid"), "Container Grid destroyed");
			assert.ok(!sap.ui.getCore().byId("F3C1---Panel"), "Panel destroyed");
		});

		</script>

	<title>QUnit Test for ResponsiveGridLayout</title>
	<link rel="shortcut icon" type="image/x-icon" href="../../images/controls/sap.ui.layout.form.ResponsiveLayout.gif">


</head>
<body class="sapUiBody">
	<h1 id="qunit-header">QUnit tests: sap.ui.layout.form.ResponsiveGridLayout</h1>
	<h2 id="qunit-banner"></h2>
	<h2 id="qunit-userAgent"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<ol id="qunit-tests"></ol>
	<br>
	<div id="uiArea1"></div>
	<br>
	<div id="uiArea2"></div>
	<br>
	<div id="uiArea3"></div>
	<br>
	<div id="uiArea4"></div>
	<br>
	<div id="uiArea5"></div>
	<br>
	<div id="uiArea6"></div>
	<br>
	<div id="uiArea7"></div>

</body>
</html>
