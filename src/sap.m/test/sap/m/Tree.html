<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>sap.m.Tree</title>

<script src="shared-config.js"></script>
<script src="../../../resources/sap-ui-core.js" data-sap-ui-xx-bindingSyntax="complex"
	id="sap-ui-bootstrap" data-sap-ui-libs="sap.m">
</script>

<script>

var oData = [
			{
				text: "Node0",
				ref: "sap-icon://action",
				state: "Success",
				nodes: [{
					text: "Node0-1",
					ref: "sap-icon://action",
					state: "Success"
				}
				]
			},
 			{
 				text: "Node1 text text text text text text text text text text text text text text text text text text text text",
 				ref: "sap-icon://action",
 				nodes: [
 					{
 		 				text: "Node1-1",
 						ref: "sap-icon://action"
 					},
 					{
 		 				text: "Node1-2",
 						ref: "sap-icon://action",
 						nodes: [
 							{
 				 				text: "Node1-2-1",
 								ref: "sap-icon://action",
 								nodes: [
								{
					 				text: "Node1-2-1-1",
									ref: "sap-icon://action",
	 								nodes: [
	 										{
	 							 				text: "Node1-2-1-1-1",
	 											ref: "sap-icon://action",
	 			 								nodes: [
	 			 										{
	 			 											text: "Node1-2-1-1-1-1",
	 			 											ref: "sap-icon://action",
	 			 			 								nodes: [
	 			 			 										{
	 			 			 											text: "Node1-2-1-1-1-1-1",
	 			 			 											ref: "sap-icon://action",
	 			 			 			 								nodes: [
	 			 			 			 									{
	 			 			 			 										text: "Node1-2-1-1-1-1-1-1",
	 			 			 			 										ref: "sap-icon://action",
	 			 			 			 	 								nodes: [
	 			 			 			 	 									{
	 			 			 			 	 										text: "Node1-2-1-1-1-1-1-1-1",
	 			 			 			 	 										ref: "sap-icon://action",
	 			 			 			 	 	 								nodes: [
	 			 			 			 	 	 									{
	 			 			 			 	 	 										text: "Node1-2-1-1-1-1-1-1-1-1",
	 			 			 			 	 	 										ref: "sap-icon://action",
	 			 			 			 	 	 	 								nodes: [
	 			 			 			 	 	 	 									{
	 			 			 			 	 	 	 										text: "Node1-2-1-1-1-1-1-1-1-1-1",
	 			 			 			 	 	 	 										ref: "sap-icon://action",
		 			 			 			 	 	 	 	 								nodes: [
		 			 			 			 	 	 	 	 								{
		 			 			 			 	 	 	 	 									text: "Node1-2-1-1-1-1-1-1-1-1-1-1",
		 			 			 			 	 	 	 	 									ref: "sap-icon://action",
			 			 			 			 	 	 	 	 								nodes: [
			 			 			 			 	 	 	 	 								{
			 			 			 			 	 	 	 	 									text: "Node1-2-1-1-1-1-1-1-1-1-1-1-1 text text text text text text text",
			 			 			 			 	 	 	 	 									ref: "sap-icon://action",
				 			 			 			 	 	 	 	 								nodes: [
				 			 			 			 	 	 	 	 								{
				 			 			 			 	 	 	 	 									text: "Node1-2-1-1-1-1-1-1-1-1-1-1-1-1",
				 			 			 			 	 	 	 	 									ref: "sap-icon://action",
					 			 			 			 	 	 	 	 								nodes: [
					 			 			 			 	 	 	 	 								{
					 			 			 			 	 	 	 	 									text: "Node1-2-1-1-1-1-1-1-1-1-1-1-1-1-1",
					 			 			 			 	 	 	 	 									ref: "sap-icon://action"
					 			 			 			 	 	 	 	 								}]
				 			 			 			 	 	 	 	 								}]
				 			 			 			 	 	 	 	 							}]
			 			 			 			 	 	 	 	 							}]
		 			 			 			 	 	 	 								}]
	 			 			 			 	 	 									}]
	 			 			 			 	 									}]
	 			 			 			 									}]
	 			 			 										}]
	 			 										}]
	 										}]
								}]
 							},
 							{
 								text: "Node1-2-2",
 								ref: "sap-icon://action"
 							},
 							{
 								text: "Node1-2-3",
 								ref: "sap-icon://action",
 								nodes: [
								{
									text: "Node1-2-3-1",
									ref: "sap-icon://action"
								},
								{
									text: "Node1-2-3-2",
									ref: "sap-icon://action"
								},
								{
									text: "Node1-2-3-3",
									ref: "sap-icon://action"
								}
								]
 							}
 						]
 					}
 				]
 			},
 			{
 				text: "Node2",
 				ref: "sap-icon://action",
 				state: "Error",
				nodes: [{
					text: "Node2-1",
					ref: "sap-icon://action",
					state: "Warning"
				}
				]
 			},
 			{
				text: "Node3",
				ref: "sap-icon://action",
				state: "Success",
				nodes: [{
					text: "Node3-1",
					ref: "sap-icon://action",
					state: "Success"
				}]
			},
			{
 				text: "Node4",
 				ref: "sap-icon://action",
 				state: "Success",
				nodes: [{
					text: "Node4-1",
					ref: "sap-icon://action",
					state: "Success"
				}]
 			},
 			{
				text: "Node5",
				ref: "sap-icon://action"
			},
			{
 				text: "Node6",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node7",
				ref: "sap-icon://action"
			},
			{
 				text: "Node8",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node9",
				ref: "sap-icon://action"
			},
			{
 				text: "Node10",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node11",
				ref: "sap-icon://action"
			},
			{
 				text: "Node12",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node13",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node14",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node15",
				ref: "sap-icon://action"
			},
			{
 				text: "Node16",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node17",
				ref: "sap-icon://action"
			},
			{
 				text: "Node18",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node19",
				ref: "sap-icon://action"
			},
			{
 				text: "Node20",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node21",
				ref: "sap-icon://action"
			},
			{
 				text: "Node22",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node23",
				ref: "sap-icon://action"
			},
			{
 				text: "Node24",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node25",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node26",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node27",
				ref: "sap-icon://action"
			},
			{
 				text: "Node28",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node29",
				ref: "sap-icon://action"
			},
			{
 				text: "Node30",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node31",
				ref: "sap-icon://action"
			},
			{
 				text: "Node32",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node33",
				ref: "sap-icon://action"
			},
			{
 				text: "Node34",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node35",
				ref: "sap-icon://action"
			},
			{
 				text: "Node36",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node37",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node38",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node39",
				ref: "sap-icon://action"
			},
			{
 				text: "Node40",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node41",
				ref: "sap-icon://action"
			},
			{
 				text: "Node42",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node43",
				ref: "sap-icon://action"
			},
			{
 				text: "Node44",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node45",
				ref: "sap-icon://action"
			},
			{
 				text: "Node46",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node47",
				ref: "sap-icon://action"
			},
			{
 				text: "Node48",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node49",
				ref: "sap-icon://action"
			},
			{
				text: "Node50",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node2",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node3",
				ref: "sap-icon://action"
			},
			{
 				text: "Node4",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node5",
				ref: "sap-icon://action"
			},
			{
 				text: "Node6",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node7",
				ref: "sap-icon://action"
			},
			{
 				text: "Node8",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node9",
				ref: "sap-icon://action"
			},
			{
 				text: "Node10",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node11",
				ref: "sap-icon://action"
			},
			{
 				text: "Node12",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node13",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node14",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node15",
				ref: "sap-icon://action"
			},
			{
 				text: "Node16",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node17",
				ref: "sap-icon://action"
			},
			{
 				text: "Node18",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node19",
				ref: "sap-icon://action"
			},
			{
 				text: "Node20",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node21",
				ref: "sap-icon://action"
			},
			{
 				text: "Node22",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node23",
				ref: "sap-icon://action"
			},
			{
 				text: "Node24",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node25",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node26",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node27",
				ref: "sap-icon://action"
			},
			{
 				text: "Node28",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node29",
				ref: "sap-icon://action"
			},
			{
 				text: "Node30",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node31",
				ref: "sap-icon://action"
			},
			{
 				text: "Node32",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node33",
				ref: "sap-icon://action"
			},
			{
 				text: "Node34",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node35",
				ref: "sap-icon://action"
			},
			{
 				text: "Node36",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node37",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node38",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node39",
				ref: "sap-icon://action"
			},
			{
 				text: "Node40",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node41",
				ref: "sap-icon://action"
			},
			{
 				text: "Node42",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node43",
				ref: "sap-icon://action"
			},
			{
 				text: "Node44",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node45",
				ref: "sap-icon://action"
			},
			{
 				text: "Node46",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node47",
				ref: "sap-icon://action"
			},
			{
 				text: "Node48",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node49",
				ref: "sap-icon://action"
			},
			{
				text: "Node50",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node2",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node3",
				ref: "sap-icon://action"
			},
			{
 				text: "Node4",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node5",
				ref: "sap-icon://action"
			},
			{
 				text: "Node6",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node7",
				ref: "sap-icon://action"
			},
			{
 				text: "Node8",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node9",
				ref: "sap-icon://action"
			},
			{
 				text: "Node10",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node11",
				ref: "sap-icon://action"
			},
			{
 				text: "Node12",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node13",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node14",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node15",
				ref: "sap-icon://action"
			},
			{
 				text: "Node16",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node17",
				ref: "sap-icon://action"
			},
			{
 				text: "Node18",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node19",
				ref: "sap-icon://action"
			},
			{
 				text: "Node20",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node21",
				ref: "sap-icon://action"
			},
			{
 				text: "Node22",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node23",
				ref: "sap-icon://action"
			},
			{
 				text: "Node24",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node25",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node26",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node27",
				ref: "sap-icon://action"
			},
			{
 				text: "Node28",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node29",
				ref: "sap-icon://action"
			},
			{
 				text: "Node30",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node31",
				ref: "sap-icon://action"
			},
			{
 				text: "Node32",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node33",
				ref: "sap-icon://action"
			},
			{
 				text: "Node34",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node35",
				ref: "sap-icon://action"
			},
			{
 				text: "Node36",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node37",
				ref: "sap-icon://action"
			},
 			{
 				text: "Node38",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node39",
				ref: "sap-icon://action"
			},
			{
 				text: "Node40",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node41",
				ref: "sap-icon://action"
			},
			{
 				text: "Node42",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node43",
				ref: "sap-icon://action"
			},
			{
 				text: "Node44",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node45",
				ref: "sap-icon://action"
			},
			{
 				text: "Node46",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node47",
				ref: "sap-icon://action"
			},
			{
 				text: "Node48",
 				ref: "sap-icon://action"
 			},
 			{
				text: "Node49",
				ref: "sap-icon://action"
			},
			{
				text: "Node50",
				ref: "sap-icon://action"
			}
 		];

	var oApp = new sap.m.App();

	var oLabel2 = new sap.m.Label({text:"******************TreeItemBase****************"});

	var oLabel3 = new sap.m.Label({text:"*********************Tree*********************"});
	var oTree = new sap.m.Tree({
		headerText: "Data in Tree Structure",
		'delete': handleControlEvent,
		dragDropConfig: new sap.ui.core.dnd.DragDropInfo({
			sourceAggregation: "items",
			targetAggregation: "items",
			dragStart:onDragStart,
			drop:onDrop
		})
	});
	oTree.setMode("MultiSelect");

	//JSON
	var oModel = new sap.ui.model.json.JSONModel();
	oTree.setModel(oModel);
	oModel.setSizeLimit(200);
	// set the data to the model
	oModel.setData(oData);
	var oStandardTreeItem = new sap.m.StandardTreeItem({
		title: "{text}",
		highlight: "{state}",
		press : handleControlEvent,
		detailPress : handleControlEvent
	});
	oTree.bindItems("/", oStandardTreeItem);
	var oBinding = oTree.getBinding("items");
	//oTree.expandToLevel(3);

	function handleControlEvent(oEvent) {
		sap.m.MessageToast.show("'" + oEvent.getId() + "' event fired");
	};

	function onDragStart(oEvent) {
		var oDragSession = oEvent.getParameter("dragSession");
		var oDraggedItem = oEvent.getParameter("target");
		var iDraggedItemIndex = oTree.indexOfItem(oDraggedItem);
		var aSelectedIndices = oTree.getBinding("items").getSelectedIndices();
		var aSelectedItems = oTree.getSelectedItems();
		var aDraggedItemContexts = [];

 		if (aSelectedItems.length > 0) {
 			if (aSelectedIndices.indexOf(iDraggedItemIndex) === -1) {
 				oEvent.preventDefault();
 			} else {
 				for (var i = 0; i < aSelectedItems.length; i++) {
 					aDraggedItemContexts.push(oBinding.getContextByIndex(aSelectedIndices[i]));
 				}
 			}
 		} else {
			aDraggedItemContexts.push(oBinding.getContextByIndex(iDraggedItemIndex));
		}

		oDragSession.setComplexData("hierarchymaintenance", {
			draggedItemContexts: aDraggedItemContexts
		});
	};

	function onDrop(oEvent) {

		var oDragSession = oEvent.getParameter("dragSession");
		var oDroppedItem = oEvent.getParameter("droppedControl");
		var aDraggedItemContexts = oDragSession.getComplexData("hierarchymaintenance").draggedItemContexts;
		var iDroppedIndex = oTree.indexOfItem(oDroppedItem);
		var oNewParentContext = oBinding.getContextByIndex(iDroppedIndex);

		if (aDraggedItemContexts.length === 0 || !oNewParentContext) {
			return;
		}

		var oModel = oTree.getBinding("items").getModel();
		var oNewParent = oNewParentContext.getProperty();

		// In the JSON data of this example the children of a node are inside an array with the name "categories".
		if (!oNewParent.categories) {
			oNewParent.categories = []; // Initialize the children array.
		}

		for (var i = 0; i < aDraggedItemContexts.length; i++) {
			if (oNewParentContext.getPath().indexOf(aDraggedItemContexts[i].getPath()) === 0) {
				// Avoid moving a node into one of its child nodes.
				continue;
			}

			// Copy the data to the new parent.
			oNewParent.categories.push(aDraggedItemContexts[i].getProperty());

			// Remove the data. The property is simply set to undefined to preserve the tree state (expand/collapse states of nodes).
			oModel.setProperty(aDraggedItemContexts[i].getPath(), undefined, aDraggedItemContexts[i], true);
		}
	};

	// footer funxtions
	function expandMulti(){
		return new sap.m.Button({
			text:"expand selected nodes",
			tooltip: "expand selected nodes",
			press: function(evt) {
				var oBinding = oTree.getBinding("items"),
					aSelectedItems = oTree.getSelectedItems(),
					aSelectedIndices = aSelectedItems.map( function(oSelectedItem) {
					return oTree.indexOfItem(oSelectedItem);
				});
				oTree.expand(aSelectedIndices);
			}
		});
	};

	function collapseMulti(){
		return new sap.m.Button({
			text:"collapse selected nodes",
			tooltip: "collapse selected nodes",
			press: function(evt) {
				var oBinding = oTree.getBinding("items"),
					aSelectedItems = oTree.getSelectedItems(),
					aSelectedIndices = aSelectedItems.map( function(oSelectedItem) {
					return oTree.indexOfItem(oSelectedItem);
				});
				oTree.collapse(aSelectedIndices);
			}
		});
	};

	function addSelectionMode(){
		return new sap.m.Select({
			tooltip: "Selection Mode",
			items: [
				new sap.ui.core.Item({ key: "0", text: sap.m.ListMode.None }),
				new sap.ui.core.Item({ key: "1", text: sap.m.ListMode.SingleSelect }),
				new sap.ui.core.Item({ key: "2", text: sap.m.ListMode.SingleSelectLeft }),
				new sap.ui.core.Item({ key: "3", text: sap.m.ListMode.SingleSelectMaster}),
				new sap.ui.core.Item({ key: "4", text: sap.m.ListMode.MultiSelect }),
				new sap.ui.core.Item({ key: "5", text: sap.m.ListMode.Delete })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sMode = oControlEvent.getParameter("selectedItem").getText();
				oTree.setMode(sMode);
			}
		});
	};

	function addNodeType(){
		return new sap.m.Select({
			tooltip: "set Type to tree node",
			items: [
				new sap.ui.core.Item({ key: "0", text: sap.m.ListType.Inactive }),
				new sap.ui.core.Item({ key: "1", text: sap.m.ListType.Detail }),
				new sap.ui.core.Item({ key: "2", text: sap.m.ListType.Navigation }),
				new sap.ui.core.Item({ key: "3", text: sap.m.ListType.Active }),
				new sap.ui.core.Item({ key: "4", text: sap.m.ListType.DetailAndActive })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sType = oControlEvent.getParameter("selectedItem").getText();
				for (var i = 0; i < oTree.getItems().length; i++) {
					oTree.getItems()[i].setType(sType);

				}
			}
		});
	};

	function addVisibility(){
		return new sap.m.Select({
			tooltip: "Visibility",
			items: [
				new sap.ui.core.Item({ key: "0", text: "Visible" }),
				new sap.ui.core.Item({ key: "1", text: "invisible" })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sVisibility = (oControlEvent.getParameter("selectedItem").getText() === "Visible") ? true : false;
				oTree.setVisible(sVisibility);
			}
		});
	};

	function addShowNoData(){
		return new sap.m.Select({
			tooltip: "ShowNoData",
			items: [
				new sap.ui.core.Item({ key: "0", text: "WithData" }),
				new sap.ui.core.Item({ key: "1", text: "ShowNoData" })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var bShowNoData = oControlEvent.getParameter("selectedItem").getText() === "ShowNoData";
				if (bShowNoData) {
					oTree.bindItems("/dd", null);
				} else {
					oTree.bindItems("/", oStandardTreeItem);
					oTree.rerender();
				}
			}
		});
	};

	function addShowSeparator(){
		return new sap.m.Select({
			tooltip: "Separator",
			items: [
				new sap.ui.core.Item({ key: "0", text: sap.m.ListSeparators.All }),
				new sap.ui.core.Item({ key: "1", text: sap.m.ListSeparators.Inner }),
				new sap.ui.core.Item({ key: "2", text: sap.m.ListSeparators.None })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sSeparator = oControlEvent.getParameter("selectedItem").getText();
				oTree.setShowSeparators(sSeparator);
			}
		});
	};

	function addSizeMode(){
		return new sap.m.Select({
			tooltip: "SizeMode",
			items: [
				new sap.ui.core.Item({ key: "0", text: "cozy" }),
				new sap.ui.core.Item({ key: "1", text: "compact" })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sMode = oControlEvent.getParameter("selectedItem").getText();
				if (sMode === "compact") {
					$("body").addClass("sapUiSizeCompact");
				} else {
					$("body").removeClass("sapUiSizeCompact");
				}
			}
		});
	};

	function addIcon(){
		return new sap.m.Select({
			tooltip: "icon (change icon will rebind the control)",
			items: [
				new sap.ui.core.Item({ key: "0", text: "withoutIcon" }),
				new sap.ui.core.Item({ key: "1", text: "withIcon" })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sType = oTree.getItems()[0].getType();
				var sItem = oControlEvent.getParameter("selectedItem").getText();
				if (sItem === "withIcon") {
					var oStandardTreeItem = new sap.m.StandardTreeItem({
						title: "{text}",
						icon: "{ref}",
						type: sType
					});
					oTree.bindItems("/", oStandardTreeItem);
				} else {
					var oStandardTreeItem = new sap.m.StandardTreeItem({
						title: "{text}",
						type: sType
					});
					oTree.bindItems("/", oStandardTreeItem);
				}
			}
		});
	};

	function addExpandToLevel(){
		return new sap.m.Select({
			tooltip: "Icon",
			items: [
				new sap.ui.core.Item({ key: "0", text: "CollapseAll" }),
				new sap.ui.core.Item({ key: "1", text: "ExpandToLevel1" })
			],
			selectedItem: "0",
			change: function(oControlEvent){
				var sItem = oControlEvent.getParameter("selectedItem").getText();
				if (sItem === "ExpandToLevel1") {
					oTree.expandToLevel(1);
				} else {
					oTree.collapseAll();
				}
			}
		});
	};

	var oPage = new sap.m.Page("TreeTest", {
		title : "Test Page for sap.m.Tree - JSON",
		content : [oTree],
		footer : new sap.m.OverflowToolbar({
			content: [
				expandMulti(),
				collapseMulti(),
				addSizeMode(),
				addSelectionMode(),
				addExpandToLevel(),
				addNodeType(),
				addShowSeparator(),
				addIcon(),
				addShowNoData(),
				addVisibility()
			]
		})
	});

	oApp.addPage(oPage).placeAt("body");
</script>
</head>
<body id="body" class="sapUiBody">
</body>
</html>
