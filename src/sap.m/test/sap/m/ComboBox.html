<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta charset="utf-8">
		<title>sap.m.ComboBox</title>
		<script src="shared-config.js"></script>
		<script id="sap-ui-bootstrap"
				src="../../../resources/sap-ui-core.js"
				data-sap-ui-libs="sap.m, sap.ui.layout"
				data-sap-ui-xx-bindingSyntax="complex">
		</script>
		<style type="text/css">
			.customLabel {
				margin: 0 0.5rem;
				vertical-align: middle;
				vertical-align: -webkit-baseline-middle;
			}
		</style>
		<script>
		var oModel = new sap.ui.model.json.JSONModel();
		var mData = {
			"items": [
				{
					"key": "LeaveBlank",
					"text": "<Leave Blank>"
				},
				{
					"key": "KEEP",
					"text": "<Keep Existing Value>"
				},
				{
					"key": "DZ",
					"text": "Algeria"
				},
				{
					"key": "AR",
					"text": "Argentina"
				},

				{
					"key": "AU",
					"text": "Australia"
				},

				{
					"key": "AT",
					"text": "Austria"
				},

				{
					"key": "BH",
					"text": "Bahrain"
				},

				{
					"id": "belgium",
					"key": "BE",
					"text": "Belgium"
				},

				{
					"key": "BA",
					"text": "Bosnia and Herzegovina"
				},

				{
					"key": "BR",
					"text": "Brazil"
				},

				{
					"key": "BG",
					"text": "Bulgaria"
				},

				{
					"key": "CA",
					"text": "Canada"
				},

				{
					"key": "CL",
					"text": "Chile"
				},

				{
					"key": "CO",
					"text": "Colombia"
				},

				{
					"key": "HR",
					"text": "Croatia"
				},

				{
					"key": "CU",
					"text": "Cuba"
				},

				{
					"key": "CZ",
					"text": "Czech Republic"
				},

				{
					"key": "DK",
					"text": "Denmark"
				},

				{
					"key": "EG",
					"text": "Egypt"
				},

				{
					"key": "EE",
					"text": "Estonia"
				},

				{
					"key": "FI",
					"text": "Finland"
				},

				{
					"key": "FR",
					"text": "France"
				},

				{
					"key": "GER",
					"text": "Germany"
				},

				{
					"key": "GH",
					"text": "Ghana"
				},

				{
					"key": "GR",
					"text": "Greece"
				},

				{
					"key": "HU",
					"text": "Hungary"
				},

				{
					"key": "IN",
					"text": "India"
				},

				{
					"key": "ID",
					"text": "Indonesia"
				},

				{
					"key": "IE",
					"text": "Ireland"
				},

				{
					"key": "IL",
					"text": "Israel"
				},

				{
					"key": "IT",
					"text": "Italy"
				},

				{
					"key": "JP",
					"text": "Japan"
				},

				{
					"key": "JO",
					"text": "Jordan"
				},

				{
					"key": "KE",
					"text": "Kenya"
				},

				{
					"key": "KW",
					"text": "Kuwait"
				},

				{
					"key": "LV",
					"text": "Latvia"
				},

				{
					"key": "LT",
					"text": "Lithuania"
				},

				{
					"key": "MK",
					"text": "Macedonia"
				},

				{
					"key": "MY",
					"text": "Malaysia"
				},

				{
					"key": "MX",
					"text": "Mexico"
				},

				{
					"key": "ME",
					"text": "Montenegro"
				},

				{
					"key": "MA",
					"text": "Morocco"
				},

				{
					"key": "NL",
					"text": "Netherlands"
				},

				{
					"key": "NZ",
					"text": "New Zealand"
				},

				{
					"key": "NG",
					"text": "Nigeria"
				},

				{
					"key": "NO",
					"text": "Norway"
				},

				{
					"key": "OM",
					"text": "Oman"
				},

				{
					"key": "PE",
					"text": "Peru"
				},

				{
					"key": "PH",
					"text": "Philippines"
				},

				{
					"key": "PL",
					"text": "Poland"
				},

				{
					"key": "PT",
					"text": "Portugal"
				},

				{
					"key": "QA",
					"text": "Qatar"
				},

				{
					"key": "RO",
					"text": "Romania"
				},

				{
					"key": "RU",
					"text": "Russia"
				},

				{
					"key": "SA",
					"text": "Saudi Arabia"
				},

				{
					"key": "SN",
					"text": "Senegal"
				},

				{
					"key": "RS",
					"text": "Serbia"
				},

				{
					"key": "SG",
					"text": "Singapore"
				},

				{
					"key": "SK",
					"text": "Slovakia"
				},

				{
					"key": "SI",
					"text": "Slovenia"
				},

				{
					"key": "ZA",
					"text": "South Africa"
				},

				{
					"key": "KR",
					"text": "South Korea"
				},

				{
					"key": "ES",
					"text": "Spain"
				},

				{
					"key": "SE",
					"text": "Sweden"
				},

				{
					"key": "CH",
					"text": "Switzerland"
				},

				{
					"key": "TN",
					"text": "Tunisia"
				},

				{
					"key": "TR",
					"text": "Turkey"
				},

				{
					"key": "UG",
					"text": "Uganda"
				},

				{
					"key": "UA",
					"text": "Ukraine"
				},

				{
					"key": "AE",
					"text": "United Arab Emirates"
				},

				{
					"key": "GB",
					"text": "United Kingdom"
				},

				{
					"key": "YE",
					"text": "Yemen"
				}
		],
			"testItems": [
				{
					"key": "1234",
					"text": "Test"
				},

				{
					"key": "2341",
					"text": "1Test"
				},

				{
					"key": "T234",
					"text": "Sonne"
				},

				{
					"key": "3433",
					"text": "Wolke"
				}
		],
			"addText": [
				{
					"key": "1234",
					"text": "Test",
					"addText" : "1234"
				},

				{
					"key": "2341",
					"text": "1Test",
					"addText" : "2341"
				},

				{
					"key": "T234",
					"text": "Sonne",
					"addText" : ""
				},

				{
					"key": "3433",
					"text": "Wolke",
					"addText" : ""
				}
			],
			"special": [
				{
					"key": "1",
					"text": "NoMatchText",
					"addText" : "NoMatchAddText"
				},
				{
					"key": "2",
					"text": "NoMatchText",
					"addText" : "MatchAddText"
				},
				{
					"key": "3",
					"text": "MatchText",
					"addText" : "NoMatchAddText"
				},
				{
					"key": "4",
					"text": "MatchText",
					"addText" : "MatchAddText"
				},
				{
					"key": "5",
					"text": "NoMatchText",
					"addText" : "MatchAddText"
				},
				{
					"key": "6",
					"text": "NoMatchText",
					"addText" : "NoMatchAddText"
				},
				{
					"key": "7",
					"text": "MatchText",
					"addText" : "NoMatchAddText"
				}
			],
			"selectedKey1" : "",
			"value1" : "",
			"selectedKey2" : ""
		};

		oModel.setData(mData);
		sap.ui.getCore().setModel(oModel);

		var oItemTemplate = new sap.ui.core.ListItem({
			key: "{key}",
			text: "{text}",
			additionalText: "{key}"
		});

		var oItemTemplate2 = new sap.ui.core.ListItem({
			key: "{key}",
			text: "{text}",
			additionalText: "{addText}"
		});

		var fnFormatter = function (text, key) {
			var sText = "";

			if (text !== undefined) {
				sText += text + " ";
			}

			if (key !== undefined) {
				sText += key;
			}

			return sText;
		};

		var oComboBox = new sap.m.ComboBox("box_default",{

			items: {
				path: "/items",
				template: oItemTemplate
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
			}
		});

		var oComboBoxTwoColumn = new sap.m.ComboBox("box_two_column",{
			showSecondaryValues: true,
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oComboBoxContainsSearch = new sap.m.ComboBox({
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		oComboBoxContainsSearch.setFilterFunction(function(sValue, oItem) {
			return oItem.getText().toLowerCase().indexOf(sValue.toLowerCase()) !== -1;
		});

		var oComboBoxTwoColumnSearchBoth = new sap.m.ComboBox({
			showSecondaryValues: true,
			filterSecondaryValues: true,
			value: "{/value1}",
			selectedKey: "{/selectedKey1}",
			items: {
				path: "/items",
				template: oItemTemplate
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
			}
		});

		var oComboBoxTwoColumnSearchBoth2 = new sap.m.ComboBox({
			showSecondaryValues: true,
			filterSecondaryValues: true,
			selectedKey: "{/selectedKey2}",
			items: {
				path: "/testItems",
				template: oItemTemplate
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
			}
		});

		var oComboBoxTwoColumnSearchBoth3 = new sap.m.ComboBox({
			showSecondaryValues: true,
			filterSecondaryValues: true,
			items: {
				path: "/addText",
				template: oItemTemplate2
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
			}
		});

		var oComboBoxTwoColumnSearchBothShowOne = new sap.m.ComboBox({
			showSecondaryValues: false,
			filterSecondaryValues: true,
			items: {
				path: "/items",
				template: oItemTemplate
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
			}
		});

		var oComboBoxTwoColumnSearchBothSpecial = new sap.m.ComboBox({
			showSecondaryValues: true,
			filterSecondaryValues: true,
			items: {
				path: "/special",
				template: oItemTemplate2
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
			}
		});

		var oComboBoxDefault = new sap.m.ComboBox("box_label_placeholder",{
			placeholder: "List of countries",
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oLabel = new sap.m.Label({
			text: "Country:",
			labelFor: oComboBoxDefault
		}).addStyleClass("customLabel");

		var oComboBoxWithPlaceholder  = new sap.m.ComboBox("box_placeholder",{
			placeholder: "Choose your country",

			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oComboBoxWithLongValueStateText  = new sap.m.ComboBox("box_longValueState",{
			placeholder: "Choose your country",
			valueState: "Warning",
			valueStateText: "Warning message. Extra long text used as a warning message. Extra long text used as a warning message - 2 Extra long text used as a warning message - 3..",
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oComboBoxDisabled  = new sap.m.ComboBox("box_disabled",{
			enabled: false,
			placeholder: "Choose your country",
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oComboBoxReadOnly  = new sap.m.ComboBox("box_read_only",{
			editable: false,
			items: {
				path: "/items",
				template: oItemTemplate
			},
			selectedKey: "GER"
		});

		var oComboBoxSuccess = new sap.m.ComboBox("box_success",{
			valueState: sap.ui.core.ValueState.Success,
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oComboBoxWarning = new sap.m.ComboBox("box_warning",{
			placeholder: "List of countries",
			valueState: sap.ui.core.ValueState.Warning,
			valueStateText: "value state text",
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oLabelWarning = new sap.m.Label({
			text: "Country:",
			labelFor: oComboBoxWarning
		}).addStyleClass("customLabel");

		var oComboBoxError = new sap.m.ComboBox("box_error",{
			valueState: sap.ui.core.ValueState.Error,
			valueStateText: "value state text",
			items: {
				path: "/items",
				template: oItemTemplate
			}
		});

		var oSpecialCharsModel = new sap.ui.model.json.JSONModel();
		var mSpecialCharsData = {
			"special": [
				{"text" : "product", "pey" : "productId"},
				{"text" : "näme", "key" : "name"},
				{"text" : "categöry", "key" : "category"},
				{"text" : "süppliername", "key" : "supplierName"},
				{"text" : "description", "key" : "description"},

				{"text" : "Абакан", "pey" : "productId"},
				{"text" : "Архангельск", "key" : "name"},
				{"text" : "Апатиты", "key" : "category"},
				{"text" : "Барнаул", "key" : "supplierName"},
				{"text" : "Белгород", "key" : "description"}
			]

		};

		oSpecialCharsModel.setData(mSpecialCharsData);

		var oSpecialCharsItemTemplate = new sap.ui.core.ListItem({
			key: "{key}",
			text: "{text}"
		});

		var oSpecialCharsComboBox = new sap.m.ComboBox({
			items: {
				path: "/special",
				template: oSpecialCharsItemTemplate
			},

			change: function(oControlEvent) {
				jQuery.sap.log.info('Event fired: "change" the value of the input change to ' + oControlEvent.getParameter("value") + " on", this);
				sap.m.MessageToast.show("change " + oControlEvent.getParameter("value"));
			},

			selectionChange: function(oControlEvent) {
				var oSelectedItem = oControlEvent.getParameter("selectedItem");
				oSelectedItem = oSelectedItem ? oSelectedItem.getText() : oSelectedItem;
				jQuery.sap.log.info('Event fired: "selectionChange" selected item change to ' + oSelectedItem + " on", this);
				oSpecialCharsComboBox.rerender();
			}

		});

		oSpecialCharsComboBox.setModel(oSpecialCharsModel);

		var oComboBoxGrouping = new sap.m.ComboBox({
			items: [
				new sap.ui.core.SeparatorItem({text: "Group1"}),
				new sap.ui.core.Item({text: "item11", key:"key11"}),
				new sap.ui.core.Item({text: "item12", key:"key12"}),
				new sap.ui.core.SeparatorItem({text: "Group2"}),
				new sap.ui.core.Item({text: "item21", key:"key21"}),
				new sap.ui.core.Item({text: "item22", key:"key22"}),
				new sap.ui.core.SeparatorItem(),
				new sap.ui.core.Item({text: "item23", key:"key23"}),
				new sap.ui.core.Item({text: "item24", key:"key24"})
			]
		});

		new sap.m.App().addPage(new sap.m.Page("page",{
			title: "sap.m.ComboBox",
			content: [
				new sap.ui.core.HTML("title_default",{ content: "<h3>Default</h3>" }),
				oComboBox,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>Two column layout</h3>" }),
				oComboBoxTwoColumn,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>setFilterFunction (contains)</h3>" }),
				oComboBoxContainsSearch,

				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>Two column layout, search in both columns</h3>" }),
				new sap.ui.core.HTML({ content: "<h4>Show both, search in both:</h4>" }),
				new sap.ui.layout.HorizontalLayout({
					content: [
						oComboBoxTwoColumnSearchBoth,
						new sap.m.Label({text: "Selected key:"}),
						new sap.m.Text({text: "{/selectedKey1}"}),
						new sap.m.Label({text: "Formatted pair:"}),
						new sap.m.Text({text: {
							parts: [
								{path: "/value1"},
								{path: "/selectedKey1"}
							],
							formatter: fnFormatter
						}}),
					]
				}),
				new sap.ui.core.HTML({ content: "<br>" }),
				new sap.ui.core.HTML({ content: "<h4>Show both, search in both (test scenarios with binding shown):</h4>" }),
				new sap.ui.layout.HorizontalLayout({
						content: [
							oComboBoxTwoColumnSearchBoth2,
							new sap.m.Label({text: "Selected key:"}),
							new sap.m.Text({text: "{/selectedKey2}"}),
						]
				}),
				new sap.ui.core.HTML({ content: "<br>" }),
				new sap.ui.core.HTML({ content: "<h4>Show both, search in both, not all items have additional text:</h4>" }),
				oComboBoxTwoColumnSearchBoth3,
				new sap.ui.core.HTML({ content: "<br>" }),
				new sap.ui.core.HTML({ content: "<h4>Show single column, search in both columns:</h4>" }),
				oComboBoxTwoColumnSearchBothShowOne,
				new sap.ui.core.HTML({ content: "<br>" }),
				new sap.ui.core.HTML({ content: "<h4>Special test case (test with letter \"m\"):</h4>" }),
				oComboBoxTwoColumnSearchBothSpecial,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML("title_placeholder",{ content: "<h3>Placeholder</h3>" }),
				oComboBoxWithPlaceholder,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML("title_label_placeholder",{ content: "<h3>Label and placeholder</h3>" }),
				new sap.ui.layout.HorizontalLayout("layout_label_placeholder",{
					content: [
						oLabel,
						oComboBoxDefault
					]
				}),
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>Disabled</h3>" }),
				oComboBoxDisabled,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>Read only</h3>" }),
				oComboBoxReadOnly,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML("title_warning",{ content: "<h3>Warning state (with label and placeholder)</h3>" }),
				new sap.ui.layout.HorizontalLayout("layout_warning",{
					content: [
						oLabelWarning,
						oComboBoxWarning
					]}
				),
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML("title_success",{ content: "<h3>Success state</h3>" }),
				oComboBoxSuccess,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>Long value state message</h3>" }),
				oComboBoxWithLongValueStateText,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>Error state</h3>" }),
				oComboBoxError,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>ComboBox with Accented characters</h3>" }),
				oSpecialCharsComboBox,
				new sap.ui.core.HTML({ content: "<hr>" }),

				new sap.ui.core.HTML({ content: "<h3>ComboBox with Grouping</h3>" }),
				oComboBoxGrouping,
				new sap.ui.core.HTML({ content: "<hr>" })
			]
		}).addStyleClass("sapUiContentPadding")).placeAt("body");
		</script>
	</head>
	<body id="body" class="sapUiBody">
	</body>
</html>
