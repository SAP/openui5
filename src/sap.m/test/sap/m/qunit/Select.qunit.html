<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Test Page for sap.m.Select</title>
		<script id="sap-ui-bootstrap"
				data-sap-ui-theme="sap_bluecrystal"
				data-sap-ui-noConflict="true"
				data-sap-ui-libs="sap.m"
				src="../../../../resources/sap-ui-core.js">
		</script>
		<script>
			jQuery.sap.require("sap.ui.core.util.MockServer");
		</script>
		<link rel="stylesheet" href="../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
		<script src="../../../../resources/sap/ui/thirdparty/qunit.js"></script>
		<script src="../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
		<script src="../../../../resources/sap/ui/qunit/qunit-coverage.js"></script>
		<script src="../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
		<script src="../../../../resources/sap/ui/thirdparty/sinon-qunit.js"></script>
		<script>
		sinon.config.useFakeTimers = true;
		QUnit.config.autostart = false;
		sap.ui.test.qunit.delayTestStart();

		// helper functions
		var fnTestControlProperty = function(mOptions) {
			var sProperty = jQuery.sap.charToUpperCase(mOptions.property);

			test("get" + sProperty + "()", function() {
				strictEqual(mOptions.control["get" + sProperty](), mOptions.output, mOptions.description);
			});
		};

		var fnStartMockServer = function(sUri, iAutoRespondAfter) {
			var sMetadataUrl = "data/metadata.xml";
			sUri = sUri || "/service/";

			// configure respond to requests delay
			sap.ui.core.util.MockServer.config({
				autoRespond: true,
				autoRespondAfter: iAutoRespondAfter || 10
			});

			// create mock server
			var oMockServer = new sap.ui.core.util.MockServer({
				rootUri: sUri
			});

			// start and return
			oMockServer.simulate(sMetadataUrl, "data");
			oMockServer.start();
			return oMockServer;
		};

		/* =========================================================== */
		/* API module                                                  */
		/* =========================================================== */

		module("API");

		/* ------------------------------ */
		/* tests for default values       */
		/* ------------------------------ */

		test("default values", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			strictEqual(oSelect.getName(), "", 'Default name is ""');
			strictEqual(oSelect.getVisible(), true, "By default the Select control is visible");
			strictEqual(oSelect.getEnabled(), true, "By default the Select control is enabled");
			strictEqual(oSelect.getWidth(), "auto", 'By default the "width" of the Select control is "auto"');
			strictEqual(oSelect.getMaxWidth(), "100%", 'By default the "max-width" of the Select control is "100%"');
			ok(oSelect.getSelectedItem() === oSelect.getFirstItem(), "By default the selected items of the Select control is the first item");
			strictEqual(oSelect.getSelectedItemId(), "item-id", "By default the selected items id of the Select control is the id of the first item");
			strictEqual(oSelect.getSelectedKey(), "0", "By default the selected key of the Select control is the key property of the first item");
			strictEqual(oSelect.getTextAlign(), sap.ui.core.TextAlign.Initial, "By default textAlign is set to Initial");
			strictEqual(oSelect.getTextDirection(), sap.ui.core.TextDirection.Inherit, "By default textDirection is set to Inherit");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getName()                      */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				visible: false
			}),
			property: "name",
			output: "",
			description: 'The name is ""'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				name: "my-select",
				items: [
					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			}),
			property: "name",
			output: "my-select",
			description: 'The name is ""'
		});

		/* ------------------------------ */
		/* getVisible()                   */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				],
				visible: false
			}),
			property: "visible",
			output: false,
			description: "Is not visible"
		});

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "visible",
			output: true,
			description: "Is visible"
		});

		/* ------------------------------ */
		/* getEnabled()                   */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "enabled",
			output: true,
			description: "Is enable"
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				enabled: false
			}),
			property: "enabled",
			output: false,
			description: "Is disabled"
		});

		/* ------------------------------ */
		/* getWidth()                     */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "50%"
			}),
			property: "width",
			output: "50%",
			description: 'The "width" is "50%"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "13rem"
			}),
			property: "width",
			output: "13rem",
			description: 'The "width" is "13rem"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "200px"
			}),
			property: "width",
			output: "200px",
			description: 'The "width" is "200px"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "4em"
			}),
			property: "width",
			output: "4em",
			description: 'The "width" is "4em"'
		});

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "width",
			output: "auto",
			description: 'The "width" is "auto"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "2in"
			}),
			property: "width",
			output: "2in",
			description: 'The "width" is "2in"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "3cm"
			}),
			property: "width",
			output: "3cm",
			description: 'The "width" is "3cm"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "125pt"
			}),
			property: "width",
			output: "125pt",
			description: 'The "width" is "125pt"'
		});

		/* ------------------------------ */
		/* getMaxWidth()                  */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "50%"
			}),
			property: "maxWidth",
			output: "50%",
			description: 'The "maxWidth" is "50%"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "13rem"
			}),
			property: "maxWidth",
			output: "13rem",
			description: 'The "maxWidth" is "13rem"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "200px"
			}),
			property: "maxWidth",
			output: "200px",
			description: 'The "maxWidth" is "200px"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "4em"
			}),
			property: "maxWidth",
			output: "4em",
			description: 'The "maxWidth" is "4em"'
		});

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "maxWidth",
			output: "100%",
			description: 'The "maxWidth" is "100%"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "2in"
			}),
			property: "maxWidth",
			output: "2in",
			description: 'The "maxWidth" is "2in"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "3cm"
			}),
			property: "maxWidth",
			output: "3cm",
			description: 'The "maxWidth" is "3cm"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "125pt"
			}),
			property: "maxWidth",
			output: "125pt",
			description: 'The "maxWidth" is "125pt"'
		});

		/* ------------------------------ */
		/* getTextDirection()             */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				textDirection: sap.ui.core.TextDirection.RTL
			}),
			property: "textDirection",
			output: "RTL",
			description: "Text direction is RTL"
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				textDirection: sap.ui.core.TextDirection.LTR
			}),
			property: "textDirection",
			output: "LTR",
			description: "Text direction is LTR"
		});

		/* ------------------------------ */
		/* getTextAlign()                 */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				textAlign: sap.ui.core.TextAlign.Left
			}),
			property: "textAlign",
			output: "Left",
			description: "Text align is left"
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				textAlign: sap.ui.core.TextAlign.Right
			}),
			property: "textAlign",
			output: "Right",
			description: "Text align is right"
		});

		/* ------------------------------ */
		/* getSelectedItem()              */
		/* ------------------------------ */

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id1",
						key: "0",
						text: "item 0"
					})
				],

				selectedItem: oExpectedItem
			});

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id1");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id1");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id1",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				],

				selectedItem: "item-id1"
			});

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id1");
			strictEqual(oSelect.getSelectedKey(), "2");
			strictEqual(oSelect.getSelectedIndex(), 2);
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id1");
			strictEqual(oSelect.getList().getSelectedKey(), "2");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({

				selectedItem: "item-id",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			strictEqual(oSelect.getSelectedIndex(), 2);
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "2");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedKey: "1",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			strictEqual(oSelect.getSelectedIndex(), 1);
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "1");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: []
			});

			// assert
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			strictEqual(oSelect.getSelectedIndex(), -1);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			ok(oSelect.getList().getSelectedItem() === null);
			strictEqual(oSelect.getList().getSelectedItemId(), "");
			strictEqual(oSelect.getList().getSelectedKey(), "");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: null
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: ""
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getSelectedItemId()            */
		/* ------------------------------ */

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: undefined
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: ""
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				],

				selectedItem: "item-id"
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			strictEqual(oSelect.getSelectedIndex(), 2);
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "2");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedItem: "item-id",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "3",
						text: "item 3"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "3");
			strictEqual(oSelect.getSelectedIndex(), 3);
			// strictEqual(oSelect.getValue(), "item 3");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "3");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedKey: "1",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			strictEqual(oSelect.getSelectedIndex(), 1);
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "1");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: []
			});

			// assert
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			strictEqual(oSelect.getSelectedIndex(), -1);
			// strictEqual(oSelect.getValue(), ""); not implemented
			ok(oSelect.getList().getSelectedItem() === null);
			strictEqual(oSelect.getList().getSelectedItemId(), "");
			strictEqual(oSelect.getList().getSelectedKey(), "");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: null
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: ""
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: undefined
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getSelectedKey()               */
		/* ------------------------------ */

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: undefined
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				],

				selectedItem: "item-id"
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			strictEqual(oSelect.getSelectedIndex(), 2);
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "2");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedItem: "item-id",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "3",
						text: "item 3"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "3");
			strictEqual(oSelect.getSelectedIndex(), 3);
			// strictEqual(oSelect.getValue(), "item 3");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "3");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedKey: "1",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			strictEqual(oSelect.getSelectedIndex(), 1);
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "1");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: []
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			strictEqual(oSelect.getSelectedIndex(), -1);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			ok(oSelect.getList().getSelectedItem() === null);
			strictEqual(oSelect.getList().getSelectedItemId(), "");
			strictEqual(oSelect.getList().getSelectedKey(), "");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: null
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: undefined
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: ""
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "0"
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedIndex(), 0);
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			ok(oSelect.getList().getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
			strictEqual(oSelect.getList().getSelectedKey(), "0");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey() using a JSON model, the aggregation items is bound, the selectedKey property is not bound", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: {
					path: "/items",
					template: new sap.ui.core.Item({
						key: "{key}",
						text: "{text}"
					})
				}
			});

			// arrange
			var oModel = new sap.ui.model.json.JSONModel();
			var mData = {
				"items": [
					{
						"key": "GER",
						"text": "Germany"
					},

					{
						"key": "CU",
						"text": "Cuba"
					}
				]
			};

			oModel.setData(mData);
			oSelect.setModel(oModel);
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			strictEqual(oSelect.getSelectedKey(), "GER");
			strictEqual(oSelect.getList().getSelectedKey(), "GER");
			strictEqual(oSelect.getSelectedIndex(), 0);
			strictEqual(oSelect.$("label").text(), "Germany");

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey() OData model, the aggregation items is bound, the selectedKey property is not bound and has the default value", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: {
					path: "/Products",
					template: new sap.ui.core.Item({
						key: "{ProductId}",
						text: "{Name}"
					})
				}
			});

			// arrange
			var sUri = "/service/";
			var oMockServer = fnStartMockServer(sUri, 10);
			var oModel = new sap.ui.model.odata.ODataModel(sUri, true);
			oSelect.setModel(oModel);
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();
			this.clock.tick(100);

			// assert
			strictEqual(oSelect.getSelectedKey(), "id_1");
			strictEqual(oSelect.getList().getSelectedKey(), "id_1");
			strictEqual(oSelect.$("label").text(), "Gladiator MX");

			// cleanup
			oMockServer.stop();
			oMockServer.destroy();
			oSelect.destroy();
		});

		test("getSelectedKey() OData model, the aggregation items is bound, the selectedKey property is not bound", function() {

			// system under test
			var oSelect = new sap.m.Select({
				selectedKey: "id_14",
				items: {
					path: "/Products",
					template: new sap.ui.core.Item({
						key: "{ProductId}",
						text: "{Name}"
					})
				}
			});

			// arrange
			var sUri = "/service/";
			var oMockServer = fnStartMockServer(sUri, 10);
			var oModel = new sap.ui.model.odata.ODataModel(sUri, true);
			oSelect.setModel(oModel);
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();
			this.clock.tick(100);

			// assert
			strictEqual(oSelect.getSelectedKey(), "id_14");
			strictEqual(oSelect.getList().getSelectedKey(), "id_14");
			strictEqual(oSelect.$("label").text(), "High End Laptop 2b");

			// cleanup
			oMockServer.stop();
			oMockServer.destroy();
			oSelect.destroy();
		});

		// BCP 1580006106
		test("synchronizeSelection() should not override the selection if the items aggregation is bound to a OData model and filters are used", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: {
					path: "/Products",
					template: new sap.ui.core.Item({
						key: "{ProductId}",
						text: "{Name}"
					})
				}
			});

			// arrange
			var sUri = "/service/";
			var iAutoRespondAfter = 10;
			var oMockServer = fnStartMockServer(sUri, iAutoRespondAfter);
			var oModel = new sap.ui.model.odata.ODataModel(sUri, true);
			oSelect.setModel(oModel);

			// IDs and names of the products in the model:
			//
			// id_1  Gladiator MX
			// id_2  Psimax
			// id_3  Hurricane GX
			// id_4  Webcam
			// id_5  Monitor Locking Cable
			// id_6  Laptop Case
			// id_7  Removable CD/DVD
			// id_8  USB Stick 16 GByte
			// id_9  Deskjet Super Highspeed
			// id_10 Laser Allround Pro
			// id_11 Flat S
			// id_12 Flat Medium
			// id_13 Flat X-large II
			// id_14 High End Laptop 2b
			// id_15 Very Natural Keyboard
			// id_16 Hardcore Hacker

			oSelect.getBinding("items").filter(new sap.ui.model.Filter([
				new sap.ui.model.Filter({
					path: "Name",
					operator: sap.ui.model.FilterOperator.StartsWith,
					value1: "F"
				}),
				new sap.ui.model.Filter({
					path: "Name",
					operator: sap.ui.model.FilterOperator.EndsWith,
					value1: "S"
				})
			], true));

			oSelect.setSelectedKey("id_5");
			oSelect.placeAt("content");
			this.clock.tick(iAutoRespondAfter + 1);	// tick the clock ahead some ms millisecond (it should be at least more than the auto respond setting to make sure that the data from the OData model is available)
			sap.ui.getCore().applyChanges();	// enforces an immediate update of the visible UI (aka "rendering")

			oSelect.getBinding("items").filter(new sap.ui.model.Filter([
				new sap.ui.model.Filter({
					path: "Name",
					operator: sap.ui.model.FilterOperator.StartsWith,
					value1: "F"
				})
			], true));
			oSelect.setSelectedKey("id_12");	// in this scenario, this call to .setSelectedKey() triggers re-rendering
			this.clock.tick(1);	// tick the clock ahead some ms millisecond after the re-rendering occur

			// assert
			strictEqual(oSelect.getSelectedKey(), "id_12");

			// cleanup
			oMockServer.stop();
			oMockServer.destroy();
			oSelect.destroy();
		});

		test("getSelectedKey() JSON model, the aggregation items is bound, the selectedKey property is bound", function() {

			// system under test
			var oSelect = new sap.m.Select({
				selectedKey: {
					path: "/selected"
				},
				items: {
					path: "/items",
					template: new sap.ui.core.Item({
						key: "{key}",
						text: "{text}"
					})
				}
			});

			// arrange
			var oModel = new sap.ui.model.json.JSONModel();
			var mData = {
				"items": [
					{
						"key": "GER",
						"text": "Germany"
					},
					{
						"key": "CU",
						"text": "Cuba"
					}
				],
				"selected": "CU"
			};

			oModel.setData(mData);
			oSelect.setModel(oModel);
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// assert
			strictEqual(oSelect.getSelectedKey(), "CU");
			strictEqual(oSelect.getList().getSelectedKey(), "CU");
			strictEqual(oSelect.getSelectedIndex(), 1);
			strictEqual(oSelect.$("label").text(), "Cuba");

			// cleanup
			oSelect.destroy();
			oModel.destroy();
		});

		// unit test for CSN 0120061532 0001300097 2014
		test("getSelectedKey() update the selection when the model has changed", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: {
					path: "/contries",
					template: new sap.ui.core.Item({
						key: "{code}",
						text: "{name}"
					})
				}
			});

			// arrange + act
			var oModel = new sap.ui.model.json.JSONModel();
			var mData = {
				"contries": [
					{
						"code": "GER",
						"name": "Germany"
					},
					{
						"code": "CU",
						"name": "Cuba"
					}
				]
			};

			oModel.setData(mData);
			oSelect.setModel(oModel);
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();
			mData.contries.shift();	// remove the first item of the model
			oModel.setData(mData);
			sap.ui.getCore().applyChanges();

			// assert
			strictEqual(oSelect.getSelectedKey(), "CU");
			strictEqual(oSelect.getSelectedItem().getKey(), "CU");
			strictEqual(oSelect.getSelectedIndex(), 0);
			strictEqual(oSelect.getList().getSelectedKey(), "CU");
			strictEqual(oSelect.getList().getSelectedItem().getKey(), "CU");

			// cleanup
			oSelect.destroy();
			oModel.destroy();
		});

		// BCP 1570296493
		test("it should synchronize property changes of items to the select control", function() {

			// system under test
			var oItem;
			var oSelect = new sap.m.Select({
				items: [
					oItem = new sap.ui.core.Item({
						key: "CU",
						text: "Cuba"
					})
				],
				selectedKey: "CU"
			});

			// act
			oItem.setKey("GER");
			oItem.setText("Germany");

			// assert
			strictEqual(oSelect.getSelectedKey(), "GER");
			strictEqual(oSelect.getSelectedItem().getText(), "Germany");

			// cleanup
			oSelect.destroy();
		});

		// BCP 1570472488
		test("it should not fire the change event after the selection has changed (via keyboard) and the scrollbar is pressed", function() {

			// system under test
			var oModel = new sap.ui.model.json.JSONModel();
			var mData = {
				"items": [
					{
						"key": "DZ",
						"text": "Algeria"
					},

					{
						"key": "AR",
						"text": "Argentina"
					},

					{
						"key": "AU",
						"text": "Australia"
					},

					{
						"key": "AT",
						"text": "Austria"
					},

					{
						"key": "BH",
						"text": "Bahrain"
					},

					{
						"key": "BE",
						"text": "Belgium"
					},

					{
						"key": "BA",
						"text": "Bosnia and Herzegovina"
					},

					{
						"key": "BR",
						"text": "Brazil"
					},

					{
						"key": "BG",
						"text": "Bulgaria"
					},

					{
						"key": "CA",
						"text": "Canada"
					},

					{
						"key": "CL",
						"text": "Chile"
					},

					{
						"key": "CO",
						"text": "Colombia"
					},

					{
						"key": "HR",
						"text": "Croatia"
					},

					{
						"key": "CU",
						"text": "Cuba"
					},

					{
						"key": "CZ",
						"text": "Czech Republic"
					},

					{
						"key": "DK",
						"text": "Denmark"
					},

					{
						"key": "EG",
						"text": "Egypt"
					},

					{
						"key": "EE",
						"text": "Estonia"
					},

					{
						"key": "FI",
						"text": "Finland"
					},

					{
						"key": "FR",
						"text": "France"
					},

					{
						"key": "GH",
						"text": "Ghana"
					},

					{
						"key": "GR",
						"text": "Greece"
					},

					{
						"key": "HK",
						"text": "Hong Kong"
					},

					{
						"key": "HU",
						"text": "Hungary"
					},

					{
						"key": "IN",
						"text": "India"
					},

					{
						"key": "ID",
						"text": "Indonesia"
					},

					{
						"key": "IE",
						"text": "Ireland"
					},

					{
						"key": "IL",
						"text": "Israel"
					},

					{
						"key": "IT",
						"text": "Italy"
					},

					{
						"key": "JP",
						"text": "Japan"
					},

					{
						"key": "JO",
						"text": "Jordan"
					},

					{
						"key": "KE",
						"text": "Kenya"
					},

					{
						"key": "KW",
						"text": "Kuwait"
					},

					{
						"key": "LV",
						"text": "Latvia"
					},

					{
						"key": "LT",
						"text": "Lithuania"
					},

					{
						"key": "MK",
						"text": "Macedonia"
					},

					{
						"key": "MY",
						"text": "Malaysia"
					},

					{
						"key": "MX",
						"text": "Mexico"
					},

					{
						"key": "ME",
						"text": "Montenegro"
					},

					{
						"key": "MA",
						"text": "Morocco"
					},

					{
						"key": "NL",
						"text": "Netherlands"
					},

					{
						"key": "NZ",
						"text": "New Zealand"
					},

					{
						"key": "NG",
						"text": "Nigeria"
					},

					{
						"key": "NO",
						"text": "Norway"
					},

					{
						"key": "OM",
						"text": "Oman"
					},

					{
						"key": "PE",
						"text": "Peru"
					},

					{
						"key": "PH",
						"text": "Philippines"
					},

					{
						"key": "PL",
						"text": "Poland"
					},

					{
						"key": "PT",
						"text": "Portugal"
					},

					{
						"key": "QA",
						"text": "Qatar"
					},

					{
						"key": "RO",
						"text": "Romania"
					},

					{
						"key": "RU",
						"text": "Russia"
					},

					{
						"key": "SA",
						"text": "Saudi Arabia"
					},

					{
						"key": "SN",
						"text": "Senegal"
					},

					{
						"key": "RS",
						"text": "Serbia"
					},

					{
						"key": "SG",
						"text": "Singapore"
					},

					{
						"key": "SK",
						"text": "Slovakia"
					},

					{
						"key": "SI",
						"text": "Slovenia"
					},

					{
						"key": "ZA",
						"text": "South Africa"
					},

					{
						"key": "KR",
						"text": "South Korea"
					},

					{
						"key": "ES",
						"text": "Spain"
					},

					{
						"key": "SE",
						"text": "Sweden"
					},

					{
						"key": "CH",
						"text": "Switzerland"
					},

					{
						"key": "TW",
						"text": "Taiwan"
					},

					{
						"key": "TN",
						"text": "Tunisia"
					},

					{
						"key": "TR",
						"text": "Turkey"
					},

					{
						"key": "UG",
						"text": "Uganda"
					},

					{
						"key": "UA",
						"text": "Ukraine"
					},

					{
						"key": "AE",
						"text": "United Arab Emirates"
					},

					{
						"key": "GB",
						"text": "United Kingdom"
					},

					{
						"key": "YE",
						"text": "Yemen"
					}
			]};

			oModel.setData(mData);
			sap.ui.getCore().setModel(oModel);

			var oItemTemplate = new sap.ui.core.Item({
				key: "{key}",
				text: "{text}"
			});

			var oSelect = new sap.m.Select({
				items: {
					path: "/items",
					template: oItemTemplate
				},

				change: function(oControlEvent) {
					jQuery.sap.log.info("Event fired: 'change' value property to " + oControlEvent.getParameter("selectedItem") + " on " + this);
				}
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");
			oSelect.focus();
			oSelect.open();
			this.clock.tick(1000);	// wait 1s after the open animation is completed
			var oPickerDomRef = oSelect.getPicker().getDomRef("cont");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);
			sap.ui.test.qunit.triggerEvent("mousedown", oPickerDomRef, {
				target: oPickerDomRef
			});

			oPickerDomRef.focus();

			sap.ui.test.qunit.triggerEvent("mouseup", oPickerDomRef, {
				target: oPickerDomRef
			});

			sap.ui.test.qunit.triggerEvent("click", oPickerDomRef, {
				target: oPickerDomRef
			});

			// assert
			strictEqual(fnFireChangeSpy.callCount, 0);

			// cleanup
			oSelect.destroy();
			oModel.destroy();
		});

		/* ------------------------------ */
		/* setName()                      */
		/* ------------------------------ */

		test("setName()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setName("select-name0");
				sap.ui.getCore().applyChanges();

				// assert
				if (oSelect._isRequiredSelectElement()) {
					strictEqual(oSelect.$().children("select").attr("name"), "select-name0", 'The attribute name is "select-name0"');
				}

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* setWidth()                     */
			/* ------------------------------ */

			test("setWidth()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setWidth("400px");
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.$().outerWidth() + "px", "400px");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* setEnabled()                   */
			/* ------------------------------ */

			test("setEnabled()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setEnabled(false);
				sap.ui.getCore().applyChanges();

				// assert
				ok(oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Disabled"), 'If the select control is disabled, it should have the CSS class "' + sap.m.SelectRenderer.CSS_CLASS + "Disabled");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* addItem                        */
			/* ------------------------------ */

			test("addItem()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var fnAddItemSpy = this.spy(oSelect, "addItem");
				var oItem = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				});

				// act
				oSelect.addItem(oItem);

				// assert
				ok(oSelect.getFirstItem() === oItem);
				ok(oSelect.getList().getFirstItem() === oItem);
				ok(fnAddItemSpy.returned(oSelect));
				ok(oItem.hasListeners("_change"));
				// ok(oItem.data(sap.m.SelectRenderer.CSS_CLASS + "ItemVisible"), "The item is marked as visible");	TODO

				// cleanup
				oSelect.destroy();
			});

			test("addItem() it should not throw an exeption", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var fnAddItemSpy = this.spy(oSelect, "addItem");

				// act
				oSelect.addItem(null);

				// assert
				ok(fnAddItemSpy.returned(oSelect));

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* insertItem()                   */
			/* ------------------------------ */

			test("insertItem()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var fnInsertAggregation = this.spy(oSelect, "insertAggregation");
				var fnInsertItem = this.spy(oSelect, "insertItem");
				var oItem = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				});

				// act
				oSelect.insertItem(oItem, 0);

				// assert
				ok(oSelect.getFirstItem() === oItem);
				ok(oSelect.getList().getFirstItem() === oItem);
				ok(fnInsertAggregation.calledWith("items", oItem, 0), "insertAggregation() method was called with the expected arguments");
				ok(fnInsertItem.returned(oSelect), 'oSelect.insertAggregation() returns this to allow method chaining');
				ok(oItem.hasListeners("_change"));
				// ok(oItem.data(sap.m.SelectRenderer.CSS_CLASS + "ItemVisible"), "The item is marked as visible");	TODO

				// cleanup
				oSelect.destroy();
			});

			test("insertItem() it should not throw an exeption", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var fnInsertItemSpy = this.spy(oSelect, "insertItem");

				// act
				oSelect.insertItem(null);

				// assert
				ok(fnInsertItemSpy.returned(oSelect));

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* setSelectedItem()              */
			/* ------------------------------ */

			test("setSelectedItem() should give a warning when called with faulty parameter", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
					fnWarningSpy = this.spy(jQuery.sap.log, "warning"),
					fnFireChangeSpy = this.spy(oSelect, "fireChange"),
					fnSetSelectedItemSpy = this.spy(oSelect, "setSelectedItem");

				// act
				oSelect.setSelectedItem({});

				// assert
				strictEqual(fnSetPropertySpy.callCount, 0, "sap.m.Select.prototype.setProperty() method was not called");
				strictEqual(fnWarningSpy.callCount, 1, "jQuery.sap.log.warning() method was called");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
				ok(fnSetSelectedItemSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItem() returns this to allow method chaining');
				ok(oSelect.getSelectedItem() === null);
				strictEqual(oSelect.getSelectedItemId(), "");
				strictEqual(oSelect.getSelectedKey(), "");
				strictEqual(oSelect.getSelectedIndex(), -1);
				// strictEqual(oSelect.getValue(), "");	// not implemented
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.getList().getSelectedItemId(), "");
				strictEqual(oSelect.getList().getSelectedKey(), "");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItem()", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						})
					]
				});

				// arrange
				var fnSetPropertySpy = this.spy(sap.m.SelectList.prototype, "setProperty"),
					fnSetAssociationSpy = this.spy(sap.m.SelectList.prototype, "setAssociation"),
					fnFireChangeSpy = this.spy(oSelect, "fireChange"),
					fnSetSelectedItemSpy = this.spy(oSelect, "setSelectedItem");

				// act
				oSelect.setSelectedItem(oExpectedItem);

				// assert
				ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
				ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
				ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				strictEqual(oSelect.getSelectedIndex(), 1);
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				ok(fnSetSelectedItemSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItem() returns this to allow method chaining');
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItem()", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						})
					]
				});

				// arrange
				var fnSetPropertySpy = this.spy(sap.m.SelectList.prototype, "setProperty"),
					fnSetAssociationSpy = this.spy(sap.m.SelectList.prototype, "setAssociation"),
					fnFireChangeSpy = this.spy(oSelect, "fireChange"),
					fnSetSelectedItemSpy = this.spy(oSelect, "setSelectedItem");

				// act
				oSelect.setSelectedItem("item-id");

				// assert
				ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
				ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
				ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				strictEqual(oSelect.getSelectedIndex(), 1);
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				ok(fnSetSelectedItemSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItem() returns this to allow method chaining');
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
				sap.ui.getCore().applyChanges();
				strictEqual(oSelect.$("label").text(), "");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItem()", function() {

				//system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setSelectedItem(oExpectedItem);

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedIndex(), 2);
				strictEqual(oSelect.getSelectedKey(), "2");
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "2");
				strictEqual(oSelect.$("label").text(), "item 2");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItem()", function() {

				//system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "2"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setSelectedItem(null);

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "0");
				strictEqual(oSelect.getSelectedIndex(), 0);
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItem() set the selected item when the Select picker pop-up menu is open", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "2"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				oSelect.open();
				this.clock.tick(500);

				// act
				oSelect.setSelectedItem(null);

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), oExpectedItem.getId());
				strictEqual(oSelect.getSelectedKey(), "0");
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), oExpectedItem.getId());
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* setSelectedItemId()            */
			/* ------------------------------ */

			test("setSelectedItemId()", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						})
					]
				});

				// arrange
				var fnFireChangeSpy = this.spy(oSelect, "fireChange"),
					fnSetSelectedItemIdSpy = this.spy(oSelect, "setSelectedItemId");

				// act
				oSelect.setSelectedItemId("item-id");

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
				ok(fnSetSelectedItemIdSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItemId() returns this to allow method chaining');
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				strictEqual(oSelect.getSelectedIndex(), 1);
				// strictEqual(oSelect.getValue(), "item 1");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				sap.ui.getCore().applyChanges();
				strictEqual(oSelect.$("label").text(), "");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItemId()", function() {

				//system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setSelectedItemId("item-id");

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "2");
				strictEqual(oSelect.getSelectedIndex(), 2);
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "2");
				strictEqual(oSelect.$("label").text(), "item 2");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItemId()", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "2"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setSelectedItemId("")

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "0");
				strictEqual(oSelect.getSelectedIndex(), 0);
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItemId() set the selected item when the Select picker pop-up menu is open", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "2"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				oSelect.open();
				this.clock.tick(500);

				// act
				oSelect.setSelectedItemId("");

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), oExpectedItem.getId());
				strictEqual(oSelect.getSelectedKey(), "0");
				strictEqual(oSelect.getSelectedIndex(), 0);
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), oExpectedItem.getId());
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedItemId() should set the value even if the corresponding item doesn't exist on the select", function() {

				// system under test
				var oSelect = new sap.m.Select({
					selectedItemId: "item-id"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assertions
				ok(oSelect.getSelectedItem() === null);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "");
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* setSelectedKey()               */
			/* ------------------------------ */

			test("setSelectedKey() first rendering", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({

					selectedKey: "2",

					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "2");
				strictEqual(oSelect.getSelectedIndex(), 2);
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "2");
				strictEqual(oSelect.$("label").text(), "item 2");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedKey() no rendering", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "1"
				});

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				strictEqual(oSelect.getSelectedIndex(), 1);
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				strictEqual(oSelect.$("label").text(), "item 1");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedKey() after the initial rendering", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				var fnSetPropertySpy = this.spy(sap.m.SelectList.prototype, "setProperty"),
					fnSetAssociationSpy = this.spy(sap.m.SelectList.prototype, "setAssociation"),
					fnFireChangeSpy = this.spy(oSelect, "fireChange"),
					fnSetSelectedKeySpy = this.spy(oSelect, "setSelectedKey");

				// act
				oSelect.setSelectedKey("1");

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
				ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
				ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
				ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
				ok(fnSetSelectedKeySpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedKey() returns this to allow method chaining');
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				strictEqual(oSelect.getSelectedIndex(), 1);
				// strictEqual(oSelect.getValue(), "item 1");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				strictEqual(oSelect.$("label").text(), "item 1");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedKey()", function() {

				//system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "2"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.setSelectedKey("");

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "0");
				strictEqual(oSelect.getSelectedIndex(), 0);
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("setSelectedKey() set the selected item when the Select picker pop-up is open", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedKey: "2"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				oSelect.open();
				this.clock.tick(500);

				// act
				oSelect.setSelectedKey("");

				// assert
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), oExpectedItem.getId());
				strictEqual(oSelect.getSelectedKey(), "0");
				strictEqual(oSelect.getSelectedIndex(), 0);
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), oExpectedItem.getId());
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* removeItem()                   */
			/* ------------------------------ */

			test("removeItem() it should return null when called with an invalid input argument value", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var fnRemoveAggregationSpy = this.spy(oSelect.getList(), "removeAggregation");
				var fnRemoveItemSpy = this.spy(oSelect, "removeItem");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				oSelect.removeItem(undefined);

				// assert
				strictEqual(fnRemoveAggregationSpy.callCount, 1, "sap.m.SelectList.prototype.removeAggregation() method was called");
				ok(fnRemoveAggregationSpy.calledWith("items", undefined), "sap.m.SelectList.prototype.removeAggregation() method was called with the expected argument");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(fnRemoveItemSpy.returned(null), "sap.m.Select.prototype.removeItem() method returns null");

				// cleanup
				oSelect.destroy();
			});

			test("removeItem() it should remove the selected item and change the selection to the first enabled item will be selected if any (test case 1)", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: {
						path: "/items",
						template: new sap.ui.core.Item({
							key: "{value}",
							text: "{text}"
						})
					},

					selectedKey: {
						path: "/selected",
						template: "{selected}"
					}
				});

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();
				var fnRemoveAggregationSpy = this.spy(oSelect.getList(), "removeAggregation");
				var mData = {
					"items": [
						{
							"value": "0",
							"text": "item 0"
						},

						{
							"value": "1",
							"text": "item 1"
						},

						{
							"value": "2",
							"text": "item 2"
						},

						{
							"value": "3",
							"text": "item 3"
						},

						{
							"value": "4",
							"text": "item 4"
						},

						{
							"value": "5",
							"text": "item 5"
						},

						{
							"value": "6",
							"text": "item 6"
						},

						{
							"value": "7",
							"text": "item 7"
						},

						{
							"value": "8",
							"text": "item 8"
						}
					],

					"selected": "8"
				};

				oModel.setData(mData);
				sap.ui.getCore().setModel(oModel);
				oSelect.placeAt("content");
				var oSelectedItem = oSelect.getItemByKey("8");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.removeItem(8);

				// assert
				strictEqual(fnRemoveAggregationSpy.callCount, 1, "sap.m.SelectList.prototype.removeAggregation() method was called");
				ok(fnRemoveAggregationSpy.calledWith("items", 8), "sap.m.SelectList.prototype.removeAggregation() method was called with the expected argument");
				strictEqual(oSelect.getSelectedKey(), "0");
				strictEqual(oSelect.getSelectedItem().getText(), "item 0");
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.getList().getSelectedItem().getText(), "item 0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(oSelectedItem.hasListeners("_change"), false);

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			test("removeItem() it should remove the selected item and change the selection to the first enabled item will be selected if any (test case 2)", function() {

				// system under test
				var oSelect = new sap.m.Select({

					items: {
						path: "/items",
						template: new sap.ui.core.Item({
							key: "{value}",
							text: "{text}"
						})
					},

					selectedKey: {
						path : "/selected",
						template: "{selected}"
					}
				});

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();

				var mData = {
					"items" : [
						{
							"value": "0",
							"text": "item 0"
						},

						{
							"value": "1",
							"text": "item 1"
						},

						{
							"value": "2",
							"text": "item 2"
						},

						{
							"value": "3",
							"text": "item 3"
						}
					],

					"selected": "0"
				};

				oModel.setData(mData);
				sap.ui.getCore().setModel(oModel);

				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.removeItem(0);
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.getSelectedItem().getId(), oSelect.getSelectedItemId());
				strictEqual(oSelect.getSelectedKey(), "1");
				strictEqual(oSelect.getSelectedItem().getText(), "item 1");
				// strictEqual(oSelect.getValue(), "item 1");	// not implemented
				strictEqual(oSelect.getList().getSelectedItem().getId(), oSelect.getSelectedItemId());
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				strictEqual(oSelect.getList().getSelectedItem().getText(), "item 1");
				strictEqual(oSelect.$("label").text(), "item 1");

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			test("removeItem() it should remove the selected item and change the selection to null (test case 3)", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.removeItem(0);
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.getSelectedKey(), "");
				ok(oSelect.getSelectedItem() === null);
				strictEqual(oSelect.getSelectedItemId(), "");
				// strictEqual(oSelect.getValue(), "");	// not implemented
				strictEqual(oSelect.getList().getSelectedKey(), "");
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.getList().getSelectedItemId(), "");
				strictEqual(oSelect.$("label").text(), "");
				ok(oExpectedItem.getDomRef() === null);
				strictEqual(oExpectedItem.hasListeners("_change"), false);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* removeAllItems()               */
			/* ------------------------------ */

			test("removeAllItems()", function() {

				// system under test
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				var fnRemoveAllItemsSpy = this.spy(oSelect, "removeAllItems");
				var fnRemoveAllAggregationSpy = this.spy(oSelect.getList(), "removeAllAggregation");
				var fnListRemoveAllItemsSpy = this.spy(oSelect.getList(), "removeAllItems");

				// act
				var oRemovedItems = oSelect.removeAllItems();

				// assert
				ok(fnRemoveAllAggregationSpy.calledWith("items"), "sap.m.Select.prototype.removeAllAggregation() method was called with the expected argument");
				strictEqual(fnListRemoveAllItemsSpy.callCount, 1, "sap.m.List.prototype.removeAllItems() method was called");
				ok(fnRemoveAllItemsSpy.returned(aItems), "sap.m.Select.prototype.removeAllItems() method returns an array of the removed items");
				ok(oSelect.getSelectedItem() === null);
				strictEqual(oSelect.getSelectedItemId(), "");
				strictEqual(oSelect.getSelectedKey(), "");
				// strictEqual(oSelect.getValue(), "");	// not implemented
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.getList().getSelectedItemId(), "");
				strictEqual(oSelect.getList().getSelectedKey(), "");
				strictEqual(oSelect.$("label").text(), "");
				strictEqual(oSelect.$("select").children().length, 0);

				for (var i = 0; i < oRemovedItems.length; i++) {
					strictEqual(oRemovedItems[i].hasListeners("_change"), false);
				}

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* destroyItems()                 */
			/* ------------------------------ */

			test("destroyItems()", function() {

				// system under test
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				var fnDestroyItemsSpy = this.spy(oSelect, "destroyItems");

				// act
				oSelect.destroyItems();

				// assert
				ok(fnDestroyItemsSpy.returned(oSelect), "sap.m.Select.prototype.destroyItems() returns this to allow method chaining");
				ok(oSelect.getSelectedItem() === null);
				// strictEqual(oSelect.getValue(), "");	// not implemented
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.$("label").text(), "");
				strictEqual(oSelect.$("select").length, 1);
				strictEqual(oSelect.$("select").children().length, 0);

				for (var i = 0; i < aItems.length; i++) {
					strictEqual(aItems[i].hasListeners("_change"), false);
				}

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* open()                         */
			/* ------------------------------ */

			test("open() on desktop", function() {

				this.stub(sap.ui.Device, "system", {
					desktop: true,
					phone: false,
					tablet: false
				});

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				document.documentElement.style.overflow = "hidden"; // hide scrollbar during test

				// act
				oSelect.open();
				this.clock.tick(1000);

				// assert
				ok(oSelect.isOpen(), "Select is open");
				ok(oSelect.hasStyleClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"));
				strictEqual(document.activeElement, oSelect.getFocusDomRef(), "The Select should get the focus");
				strictEqual(oSelect.$().outerWidth(), oSelect.getPicker().$().outerWidth(), "The width of the pop-up is strictEqual to the width of the input");

				// cleanup
				oSelect.destroy();
				document.documentElement.style.overflow = ""; // restore scrollbar after the test is executed
			});

			test("open() on phone", function() {

				this.stub(sap.ui.Device, "system", {
					desktop: false,
					phone: true,
					tablet: false
				});

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				document.documentElement.style.overflow = "hidden"; // hide scrollbar during test

				// act
				oSelect.open();
				this.clock.tick(1000);

				// assert
				ok(oSelect.isOpen(), "Select is open");
				ok(oSelect.hasStyleClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"));
				strictEqual(oSelect.getPicker().$().width(), jQuery(window).width(), "The width of the pop-up is strictEqual to the width of the browser view port");

				// cleanup
				oSelect.destroy();
				document.documentElement.style.overflow = ""; // restore scrollbar after test
			});

			test("open() on tablet", function() {

				this.stub(sap.ui.Device, "system", {
					desktop: false,
					phone: false,
					tablet: true
				});

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				document.documentElement.style.overflow = "hidden"; // hide scrollbar during test

				// act
				oSelect.open();
				this.clock.tick(1000);

				// assert
				ok(oSelect.isOpen(), "Select is open");
				ok(oSelect.hasStyleClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"));
				strictEqual(document.activeElement, oSelect.getFocusDomRef(), "The Select should get the focus");
				strictEqual(oSelect.$().outerWidth(), oSelect.getPicker().$().outerWidth(), "The width of the pop-up is strictEqual to the width of the input");

				// cleanup
				oSelect.destroy();
				document.documentElement.style.overflow = ""; // restore scrollbar after test
			});

			test("open() check whether the active state persist after re-rendering", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				oSelect.open();
				this.clock.tick(500);

				// act
				oSelect.rerender();
				sap.ui.getCore().applyChanges();

				// assert
				ok(oSelect.hasStyleClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"));

				// cleanup
				oSelect.destroy();
			});

			test("open() the picker popup (dropdown list) should automatically size itself to fit its content", function() {

				this.stub(sap.ui.Device, "system", {
					desktop: true,
					phone: false,
					tablet: false
				});

				// system under test
				var oSelect = new sap.m.Select({
					width: "100px",
					items: [
						new sap.ui.core.Item({
							text: "Lorem ipsum dolor sit amet, duo ut soleat insolens, commodo vidisse intellegam ne usu"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.open();
				this.clock.tick(500);

				// assert
				ok(oSelect.getPicker().getDomRef().offsetWidth > 100);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* findFirstEnabledItem()         */
			/* ------------------------------ */

			test("findFirstEnabledItem()", function() {

				// system under test
				var oExpectedItem;
				var aItems = [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oFirstEnabledItem = oSelect.findFirstEnabledItem(aItems);

				// assert
				ok(oFirstEnabledItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findFirstEnabledItem()", function() {

				// system under test
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oFirstEnabledItem = oSelect.findFirstEnabledItem(aItems);

				// assert
				ok(oFirstEnabledItem === null, 'The first enabled item is "null"');

				// cleanup
				oSelect.destroy();
			});

			test("findFirstEnabledItem()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oFirstEnabledItem = oSelect.findFirstEnabledItem([]);

				// assert
				ok(oFirstEnabledItem === null, 'The first enabled item is "null"');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* findLastEnabledItem()          */
			/* ------------------------------ */

			test("findLastEnabledItem()", function() {

				// system under test
				var oExpectedItem;
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					oExpectedItem = new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oLastEnabledItem = oSelect.findLastEnabledItem(aItems);

				// assert
				ok(oLastEnabledItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findLastEnabledItem()", function() {

				// system under test
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oLastEnabledItem = oSelect.findLastEnabledItem(aItems);

				// assert
				ok(oLastEnabledItem === null, 'The last enabled item is "null"');

				// cleanup
				oSelect.destroy();
			});

			test("findLastEnabledItem()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oLastEnabledItem = oSelect.findLastEnabledItem([]);

				// assert
				ok(oLastEnabledItem === null, 'The last enabled item is "null"');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* findNextItemByFirstCharacter() */
			/* ------------------------------ */

			test("findNextItemByFirstCharacter() test case 1", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							text: "Algeria"
						}),

						oExpectedItem = new sap.ui.core.Item({
							text: "Argentina"
						}),

						new sap.ui.core.Item({
							text: "Australia"
						})
					]
				});

				// arrange
				oSelect.setSelectedItem(oSelect.getFirstItem());

				// act
				var oNextItem = oSelect.findNextItemByFirstCharacter("a");

				// assert
				ok(oNextItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findNextItemByFirstCharacter() test case 2", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "DZ",
							text: "Algeria"
						}),

						new sap.ui.core.Item({
							key: "AR",
							text: "Argentina"
						}),

						oExpectedItem = new sap.ui.core.Item({
							key: "AU",
							text: "Australia"
						})
					]
				});

				// arrange
				oSelect.setSelectedKey("AR");

				// act
				var oNextItem = oSelect.findNextItemByFirstCharacter("a");

				// assert
				ok(oNextItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findNextItemByFirstCharacter() test case 3", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "DZ",
							text: "Algeria"
						}),

						new sap.ui.core.Item({
							key: "AR",
							text: "Argentina"
						}),

						new sap.ui.core.Item({
							key: "AU",
							text: "Australia"
						})
					]
				});

				// arrange
				oSelect.setSelectedKey("AU");

				// act
				var oNextItem = oSelect.findNextItemByFirstCharacter("a");

				// assert
				ok(oNextItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findNextItemByFirstCharacter() test case 4", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "DZ",
							text: "Algeria"
						}),

						new sap.ui.core.Item({
							key: "AR",
							text: "Argentina",
							enabled: false
						}),

						oExpectedItem = new sap.ui.core.Item({
							key: "AU",
							text: "Australia"
						}),

						new sap.ui.core.Item({
							key: "AT",
							text: "Austria"
						})
					]
				});

				// arrange
				oSelect.setSelectedKey("DZ");

				// act
				var oNextItem = oSelect.findNextItemByFirstCharacter("a");

				// assert
				ok(oNextItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findNextItemByFirstCharacter() test case 5", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "DZ",
							text: "Algeria"
						}),

						new sap.ui.core.SeparatorItem(),

						oExpectedItem = new sap.ui.core.Item({
							key: "AU",
							text: "Australia"
						}),

						new sap.ui.core.Item({
							key: "AT",
							text: "Austria"
						})
					]
				});

				// arrange
				oSelect.setSelectedItem(oSelect.getFirstItem());

				// act
				var oNextItem = oSelect.findNextItemByFirstCharacter("a");

				// assert
				ok(oNextItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("findNextItemByFirstCharacter() test case 6", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "DZ",
							text: "Algeria"
						}),

						new sap.ui.core.Item({
							key: "AU",
							text: "Australia"
						}),

						new sap.ui.core.Item({
							key: "AT",
							text: "Austria"
						})
					]
				});

				// arrange
				oSelect.setSelectedKey("DZ");

				// act
				var oNextItem = oSelect.findNextItemByFirstCharacter("b");

				// assert
				ok(oNextItem === null);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* setSelectedIndex()             */
			/* ------------------------------ */

			var setSelectedIndexTestCase = function(sTestName, mOptions) {
				test("setSelectedIndex()", function() {

					// system under test
					var oSelect = mOptions.control;

					// act
					oSelect.setSelectedIndex(mOptions.input);

					// assert
					ok(oSelect.getSelectedItem() === mOptions.output, sTestName);

					// cleanup
					oSelect.destroy();
				});
			};

			(function() {
				var oExpectedItem;
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				setSelectedIndexTestCase("", {
					control: new sap.m.Select({
						items: aItems
					}),
					input: 2,
					output: oExpectedItem
				});
			}());

			setSelectedIndexTestCase("", {
				control: new sap.m.Select(),
				input: 2,
				output: null
			});

			(function() {
				var oExpectedItem;
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					}),

					oExpectedItem = new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				setSelectedIndexTestCase("The provided index is bigger than the last item's index", {
					control: new sap.m.Select({
						items: aItems
					}),
					input: 10,
					output: oExpectedItem
				});
			}());

			/* ------------------------------ */
			/* getItemAt()                    */
			/* ------------------------------ */

			test("getItemAt()", function() {

				// system under test
				var oExpectedItem;
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					oExpectedItem = new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oItem = oSelect.getItemAt(2),
					oItem1 = oSelect.getItemAt(6);

				// assert
				ok(oItem === oExpectedItem);
				ok(oItem1 === null);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* getFirstItem()                 */
			/* ------------------------------ */

			test("getFirstItem()", function() {

				// system under test
				var oExpectedItem;
				var aItems = [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oItem = oSelect.getFirstItem();

				// assert
				ok(oItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("getFirstItem()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oExpectedItem = oSelect.getFirstItem();

				// assert
				ok(oExpectedItem === null, "There are no items");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* getLastItem()                  */
			/* ------------------------------ */

			test("getLastItem()", function() {

				// system under test
				var oExpectedItem;
				var aItems = [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oItem = oSelect.getLastItem();

				// assert
				ok(oItem === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			test("getLastItem()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oItem = oSelect.getLastItem();

				// assert
				ok(oItem === null, "There are no items");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* getItemByKey()                 */
			/* ------------------------------ */

			test("getItemByKey()", function() {

				// system under test
				var oExpectedItem0;
				var oExpectedItem1;
				var oExpectedItem2;
				var aItems = [
					oExpectedItem0 = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem1 = new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem2 = new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				var oItem0 = oSelect.getItemByKey("0"),
					oItem1 = oSelect.getItemByKey("1"),
					oItem2 = oSelect.getItemByKey("2"),
					oItem3 = oSelect.getItemByKey("3");

				// assert
				ok(oItem0 === oExpectedItem0);
				ok(oItem1 === oExpectedItem1);
				ok(oItem2 === oExpectedItem2);
				ok(oItem3 === null);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* getEnabledItems()              */
			/* ------------------------------ */

			test("getEnabledItems()", function() {

				// system under test
				var oExpectedItem;
				var aItems = [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					})
				];

				var oSelect = new sap.m.Select({
					items: aItems
				});

				// assert + act
				ok(oSelect.getEnabledItems()[0] === oExpectedItem);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* destroy()                      */
			/* ------------------------------ */

			test("destroy()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),
					]
				});

				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.destroy();
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.getItems().length, 0);
				ok(oSelect.getDomRef() === null);
				ok(oSelect.getPicker() === null);
				ok(oSelect.getList() === null);

				// cleanup
				oSelect.destroy();
			});

			test("calling destroy() when the Select's picker pop-up is open", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				oSelect.open();
				this.clock.tick(1000);

				// act
				oSelect.destroy();
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.getItems().length, 0);
				ok(oSelect.getDomRef() === null);
				ok(oSelect.getPicker() === null);
				ok(oSelect.getList() === null);
			});

			// Tests for methods borrowed from class sap.ui.core.Control

			// Tests for methods borrowed from class sap.ui.core.Element

			// Tests for methods borrowed from class sap.ui.base.ManagedObject

			/* ------------------------------------ */
			/* addAggregation() + getAggregation()  */
			/* ------------------------------------ */

			test("addAggregation() + getAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select();
				var oItem = new sap.ui.core.Item({
					key: "GER",
					text: "Germany"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				var fnAddAggregationSpy = this.spy(oSelect, "addAggregation");
				var fnInvalidateSpy = this.spy(oSelect, "invalidate");

				// act
				oSelect.addAggregation("items", oItem);

				// assert
				ok(fnAddAggregationSpy.returned(oSelect), "sap.m.Select.prototype.addAggregation() returns this to allow method chaining");
				ok(fnInvalidateSpy.calledWithExactly(oItem));
				ok(oSelect.getAggregation("items")[0] === oItem);

				// cleanup
				oSelect.destroy();
			});

			test("addAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select();
				var oItem = new sap.ui.core.Item({
					key: "GER",
					text: "Germany"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				var fnAddAggregationSpy = this.spy(oSelect, "addAggregation");
				var fnInvalidateSpy = this.spy(oSelect, "invalidate");

				// act
				oSelect.addAggregation("items", oItem, true);

				// assert
				ok(fnAddAggregationSpy.returned(oSelect), "sap.m.Select.prototype.addAggregation() returns this to allow method chaining");
				ok(!fnInvalidateSpy.calledWithExactly(oItem));
				ok(oSelect.getAggregation("items")[0] === oItem);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* setAssociation() + getAssociation()  */
			/* ------------------------------------ */

			test("setAssociation() + getAssociation()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						}),
						new sap.ui.core.Item({
							id: "item-id",
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnSetAssociationSpy = this.spy(oSelect, "setAssociation");

				// act
				oSelect.setAssociation("selectedItem", "item-id");

				// assert
				ok(fnSetAssociationSpy.returned(oSelect), "sap.m.Select.prototype.setAssociation() returns this to allow method chaining");
				ok(oSelect.getAssociation("selectedItem") === "item-id");
				ok(oSelect.getList().getAssociation("selectedItem") === "item-id");

				// cleanup
				oSelect.destroy();
			});

			test("setAssociation() + getAssociation()", function() {

				// system under test
				var oItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						}),
						oItem = new sap.ui.core.Item({
							id: "item-id",
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnSetAssociationSpy = this.spy(oSelect, "setAssociation");

				// act
				oSelect.setAssociation("selectedItem", oItem);

				// assert
				ok(fnSetAssociationSpy.returned(oSelect), "sap.m.Select.prototype.setAssociation() returns this to allow method chaining");
				ok(oSelect.getAssociation("selectedItem") === "item-id");
				ok(oSelect.getList().getAssociation("selectedItem") === "item-id");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* updateItems()                        */
			/* ------------------------------------ */

			// BCP 1570150535
			test('it should not dispatch the change event when the binding of the item aggregation is updated', function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: {
						path: "/contries",
						template: new sap.ui.core.Item({
							text: "{name}"
						})
					},
					change: function(oControlEvent) {
						jQuery.sap.log.info("Event fired: 'change' value property to " + oControlEvent.getParameter("selectedItem") + " on " + this);
					}
				});

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();
				var mData = {
					"contries": [
						{
							"name": "Germany"
						},
						{
							"name": "Cuba"
						}
					]
				};
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");
				oModel.setData(mData);
				oSelect.setModel(oModel);
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.updateItems("change");

				// act
				oSelect.getFocusDomRef().blur();

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event should not be fired");

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			/* ------------------------------ */
			/* ariaLabelledBy()               */
			/* ------------------------------ */

			test("it should set the value of the aria-labelledby attribute to the id of the label concatenated with the id of the internal label element separated by a space", function() {

				// system under test
				var oLabel = new sap.m.Label({
					id: "label"
				});

				var oSelect = new sap.m.Select({
					ariaLabelledBy: oLabel
				});

				// arrange
				oLabel.placeAt("content");
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				var sExpectedLabelledBy = "label " + oSelect.getId() + "-label";

				// assert
				strictEqual(oSelect.getDomRef().getAttribute("aria-labelledby"), sExpectedLabelledBy);

				// cleanup
				oSelect.destroy();
				oLabel.destroy();
			});

			/* ------------------------------------ */
			/* destroyAggregation()                 */
			/* ------------------------------------ */

			test("destroyAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnDestroyAggregationSpy = this.spy(oSelect, "destroyAggregation");
				var fnInvalidateSpy = this.spy(oSelect, "invalidate");

				// act
				oSelect.destroyAggregation("items");

				// assert
				ok(fnDestroyAggregationSpy.returned(oSelect), "sap.m.Select.prototype.destroyAggregation() returns this to allow method chaining");
				ok(fnInvalidateSpy.calledOnce);
				strictEqual(oSelect.getItems().length, 0);

				// cleanup
				oSelect.destroy();
			});

			test("destroyAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnDestroyAggregationSpy = this.spy(oSelect, "destroyAggregation");
				var fnInvalidateSpy = this.spy(oSelect, "invalidate");

				// act
				oSelect.destroyAggregation("items", true);

				// assert
				ok(fnDestroyAggregationSpy.returned(oSelect), "sap.m.Select.prototype.destroyAggregation() returns this to allow method chaining");
				ok(!fnInvalidateSpy.calledOnce);
				strictEqual(oSelect.getItems().length, 0);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* findAggregatedObjects()              */
			/* ------------------------------------ */

			test("findAggregatedObjects()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnFindAggregatedObjectsSpy = this.spy(oSelect, "findAggregatedObjects");

				// act
				oSelect.findAggregatedObjects();

				// assert
				ok(fnFindAggregatedObjectsSpy.returned(oSelect.getItems()));

				// cleanup
				oSelect.destroy();
			});

			/* -------------------------------------------------- */
			/* getBinding() + getBindingInfo() + getBindingPath() */
			/* -------------------------------------------------- */

			test("getBinding() + getBindingInfo() + getBindingPath()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();
				var mData = {
					"countries": [
						{
							"value": "GER",
							"text": "Germany"
						}
					],
					"selected": "GER"
				};
				var oItemTemplate = new sap.ui.core.Item({
					key: "{select-model>value}",
					text: "{select-model>text}"
				});

				oModel.setData(mData);
				oSelect.setModel(oModel, "select-model");

				// act
				oSelect.bindItems({
					path: "select-model>/countries",
					template: oItemTemplate
				});

				oSelect.bindProperty("selectedKey", {
					path: "select-model>/selected"
				});

				// assert
				ok(oSelect.getBinding("selectedKey"));
				ok(oSelect.getBinding("items"));
				ok(oSelect.getBindingInfo("selectedKey"));
				ok(oSelect.getBindingInfo("items"));
				strictEqual(oSelect.getBindingPath("selectedKey"), "/selected");
				strictEqual(oSelect.getBindingPath("items"), "/countries");
				ok(oSelect.isBound("selectedKey"));
				ok(oSelect.isBound("items"));

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			/* ------------------------------------ */
			/* setProperty() + getProperty()        */
			/* ------------------------------------ */

			test('setProperty() + getProperty() test for "selectedKey" property', function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						}),
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnInvalidateSpy = this.spy(oSelect, "invalidate");

				// act
				oSelect.setProperty("selectedKey", "GER");

				// assert
				strictEqual(oSelect.getSelectedKey(), "GER");
				strictEqual(oSelect.getProperty("selectedKey"), "GER");
				strictEqual(oSelect.getList().getSelectedKey(), "GER");
				strictEqual(oSelect.getList().getProperty("selectedKey"), "GER");
				ok(fnInvalidateSpy.called);

				// cleanup
				oSelect.destroy();
			});

			test('setProperty() + getProperty() test for "selectedItemId" property', function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							id: "item-cu",
							key: "CU",
							text: "Cuba"
						}),
						new sap.ui.core.Item({
							id: "item-ger",
							key: "GER",
							text: "Germany"
						})
					]
				});

				// arrange
				var fnInvalidateSpy = this.spy(oSelect, "invalidate");

				// act
				oSelect.setProperty("selectedItemId", "item-ger", true);

				// assert
				strictEqual(oSelect.getSelectedItemId(), "item-ger");
				strictEqual(oSelect.getProperty("selectedItemId"), "item-ger");
				strictEqual(oSelect.getList().getSelectedItemId(), "item-ger");
				strictEqual(oSelect.getList().getProperty("selectedItemId"), "item-ger");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* indexOfAggregation()                 */
			/* ------------------------------------ */

			test("indexOfAggregation()", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							text: "Cuba"
						}),
						oExpectedItem = new sap.ui.core.Item({
							text: "Germany"
						})
					]
				});

				// assert
				strictEqual(oSelect.indexOfAggregation("items", oExpectedItem), 1);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* insertAggregation()                  */
			/* ------------------------------------ */

			test("insertAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select();
				var oItem = new sap.ui.core.Item({
					text: "Germany"
				});

				// act
				oSelect.insertAggregation("items", oItem);

				// assert
				ok(oSelect.getItems()[0] === oItem);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* removeAggregation()                  */
			/* ------------------------------------ */

			test("removeAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						})
					]
				});

				// act
				oSelect.removeAggregation("items", 0);

				// assert
				strictEqual(oSelect.getItems().length, 0);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* removeAllAggregation()               */
			/* ------------------------------------ */

			test("removeAllAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						}),
						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						})
					]
				});

				// act
				oSelect.removeAllAggregation("items");

				// assert
				strictEqual(oSelect.getItems().length, 0);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* removeAllAssociation()               */
			/* ------------------------------------ */

			test("removeAllAssociation()", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							id: "ger-id",
							key: "GER",
							text: "Germany"
						}),
						oExpectedItem = new sap.ui.core.Item({
							id: "cu-id",
							key: "CU",
							text: "Cuba"
						})
					],

					selectedItem: oExpectedItem
				});

				// arrange
				var fnRemoveAllAssociationSpy = this.spy(oSelect, "removeAllAssociation");

				// act
				oSelect.removeAllAssociation("selectedItem");

				// assert
				ok(oSelect.getSelectedItem() === null);
				ok(oSelect.getList().getSelectedItem() === null);
				ok(fnRemoveAllAssociationSpy.returned("cu-id"));

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------------ */
			/* unbindProperty()                     */
			/* ------------------------------------ */

			test("unbindProperty()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();
				var mData = {
					"countries": [
						{
							"code": "GER",
							"name": "Germany"
						},
						{
							"code": "CU",
							"name": "Cuba"
						}
					],
					"selected": "CU"
				};

				var oItemTemplate = new sap.ui.core.Item({
					key: "{code}",
					text: "{name}"
				});

				oSelect.bindItems({
					path: "/countries",
					template: oItemTemplate
				});

				oSelect.bindProperty("selectedKey", {
					path: "/selected"
				});

				oModel.setData(mData);
				oSelect.setModel(oModel);

				// act
				oSelect.unbindProperty("selectedKey");

				// assert
				strictEqual(oSelect.isBound("selectedKey"), false, "The property is not bound");
				strictEqual(oSelect.getProperty("selectedKey"), "GER", 'Property "selectedKey" is reset to the default value');

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			/* ------------------------------------ */
			/* unbindAggregation()                  */
			/* ------------------------------------ */

			test("unbindAggregation()", function() {

				// system under test
				var oSelect = new sap.m.Select();

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();
				var mData = {
					"countries": [
						{
							"code": "GER",
							"name": "Germany"
						},
						{
							"code": "CU",
							"name": "Cuba"
						}
					],
					"selected": "CU"
				};

				var oItemTemplate = new sap.ui.core.Item({
					key: "{code}",
					text: "{name}"
				});

				oSelect.bindItems({
					path: "/countries",
					template: oItemTemplate
				});

				oModel.setData(mData);
				oSelect.setModel(oModel);

				// act
				oSelect.unbindAggregation("items");

				// assert
				strictEqual(oSelect.isBound("items"), false, 'The aggregation "items" is not bound');
				strictEqual(oSelect.getAggregation("items", []).length, 0, 'The aggregation "items" must be reset');

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			/* ------------------------------------ */
			/* updateAggregation()                  */
			/* ------------------------------------ */

			// unit test for CSN 0120061532 0001266189 2014
			//
			// Do not clear the selection when items are destroyed.
			// When using Two-Way Data Binding and the binding are refreshed,
			// the items will be destroyed and the aggregation items is filled again.
			test("updateAggregation() do not clear the selection when items are destroyed", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: {
						path: "/contries",
						template: new sap.ui.core.Item({
							key: "{code}",
							text: "{name}"
						})
					},
					selectedKey: {
						path: "/selected"
					}
				});

				// arrange
				var oModel = new sap.ui.model.json.JSONModel();
				var mData = {
					"contries": [
						{
							"code": "GER",
							"name": "Germany"
						},
						{
							"code": "CU",
							"name": "Cuba"
						}
					],

					// path : selectedKey
					"selected": "CU"
				};

				oModel.setData(mData);
				oSelect.setModel(oModel);
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				oSelect.updateAggregation("items");
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.getSelectedKey(), "CU");
				strictEqual(oSelect.getList().getSelectedKey(), "CU");

				// cleanup
				oSelect.destroy();
				oModel.destroy();
			});

			/* ------------------------------------ */
			/* setBindingContext()                  */
			/* ------------------------------------ */

			/* ------------------------------------ */
			/* unbindContext()                      */
			/* ------------------------------------ */

			/* ------------------------------------ */
			/* unbindObject()                       */
			/* ------------------------------------ */

			/* ------------------------------------ */
			/* _isRequiredSelectElement()           */
			/* ------------------------------------ */

			test("_isRequiredSelectElement() it should return true when the width property is set to auto", function() {

				// system under test
				var oSelect = new sap.m.Select({
					width: "auto"
				});

				// assert
				strictEqual(oSelect._isRequiredSelectElement(), true);

				// cleanup
				oSelect.destroy();
			});

			test("_isRequiredSelectElement() it should return false when the autoAdjustWidth property is set to true", function() {

				// system under test
				var oSelect = new sap.m.Select({
					autoAdjustWidth: true
				});

				// assert
				strictEqual(oSelect._isRequiredSelectElement(), false);

				// cleanup
				oSelect.destroy();
			});

			test("_isRequiredSelectElement() it should return false", function() {

				// system under test
				var oSelect = new sap.m.Select({
					width: "15rem"
				});

				// assert
				strictEqual(oSelect._isRequiredSelectElement(), false);

				// cleanup
				oSelect.destroy();
			});

			/* =========================================================== */
			/* HTML module                                                 */
			/* =========================================================== */

			module("HTML");

			/* ------------------------------ */
			/* rendering                      */
			/* ------------------------------ */

			test("rendering", function() {

				// system under test
				var oSelect0 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				var oSelect1 = new sap.m.Select({
					width: "50%",
					items: [
						new sap.ui.core.Item({
							key: "3",
							text: "item 3 item is not visible"
						})
					],
					visible: false
				});

				var oSelect2 =  new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "4",
							text: "item 4"
						}),

						new sap.ui.core.Item({
							key: "5",
							text: "item 5"
						}),

						new sap.ui.core.Item({
							key: "6",
							text: "item 6"
						}),

						new sap.ui.core.Item({
							key: "7",
							text: "item 7"
						}),

						new sap.ui.core.Item({
							key: "8",
							text: "item 8"
						})
					]
				});

				var oSelect3 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "9",
							text: "item 9"
						}),
					]
				});

				var oSelect4 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "10",
							text: "item 10"
						}),

						new sap.ui.core.Item({
							key: "11",
							text: "item 11"
						}),

						new sap.ui.core.Item({
							key: "12",
							text: "item 12"
						}),

						new sap.ui.core.Item({
							key: "13",
							text: "item 13"
						}),
					],

					selectedKey: "13"
				});

				var oSelect5 = new sap.m.Select({
					width: "13rem",
					items: [
						new sap.ui.core.Item({
							key: "14",
							text: "item 14"
						}),

						new sap.ui.core.Item({
							key: "15",
							text: "item 15"
						}),

						new sap.ui.core.Item({
							key: "16",
							text: "item 16"
						}),

						new sap.ui.core.Item({
							key: "17",
							text: "item 17"
						})
					]
				});

				var oSelect6 = new sap.m.Select({
					width: "200px",

					items: [
						new sap.ui.core.Item({
							key: "18",
							text: "item 18"
						}),

						new sap.ui.core.Item({
							key: "19",
							text: "item 19"
						}),

						new sap.ui.core.Item({
							key: "20",
							text: "item 20"
						}),

						new sap.ui.core.Item({
							key: "21",
							text: "item 21"
						})
					]
				});

				var oSelect7 = new sap.m.Select({

					items: [
						new sap.ui.core.Item({
							key: "22",
							text: "item 22"
						}),

						new sap.ui.core.Item({
							key: "23",
							text: "item 23"
						}),

						new sap.ui.core.Item({
							key: "24",
							text: "item 24"
						})
					]
				});

				var oSelect8 = new sap.m.Select({
					width: "4em",
					items: []
				});

				var oSelect9 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "25",
							text: "item 25"
						}),

						new sap.ui.core.Item({
							key: "26",
							text: "item 26"
						}),

						new sap.ui.core.Item({
							key: "27",
							text: "item 27"
						})
					],

					selectedItem: null
				});

				var oSelect10 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "28",
							text: "item 28"
						}),

						new sap.ui.core.Item({
							key: "29",
							text: "item 29"
						}),

						new sap.ui.core.Item({
							key: "30",
							text: "item 30"
						})
					]
				});

				var oSelect11 = new sap.m.Select({
					width: "2in",
					items: [
						new sap.ui.core.Item({
							key: "31",
							text: "item 31"
						}),

						new sap.ui.core.Item({
							key: "32",
							text: "item 32"
						}),

						new sap.ui.core.Item({
							key: "33",
							text: "item 33"
						})
					]
				});

				var oSelect12 = new sap.m.Select({
					width: "3cm",
					items: [
						new sap.ui.core.Item({
							key: "34",
							text: "item 34"
						}),

						new sap.ui.core.Item({
							key: "35",
							text: "item 35"
						}),

						new sap.ui.core.Item({
							key: "36",
							text: "item 36"
						})
					]
				});

				var oSelect13 = new sap.m.Select({
					width: "125pt",
					items: [
						new sap.ui.core.Item({
							key: "37",
							text: "item 37"
						}),

						new sap.ui.core.Item({
							key: "38",
							text: "item 38"
						}),

						new sap.ui.core.Item({
							key: "39",
							text: "item 39"
						})
					]
				});

				var oSelect14 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "40",
							text: "item 40"
						}),

						new sap.ui.core.Item({
							key: "41",
							text: "item 41"
						}),

						new sap.ui.core.Item({
							key: "42",
							text: "item 42"
						})
					]
				});

				var oSelect15 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "43",
							text: "item 43"
						}),

						new sap.ui.core.Item({
							key: "44",
							text: "item 44"
						}),

						new sap.ui.core.Item({
							key: "45",
							text: "item 45"
						})
					]
				});

				var oSelect16 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "46",
							text: "item 46"
						}),

						new sap.ui.core.Item({
							key: "47",
							text: "item 47"
						}),

						new sap.ui.core.Item({
							key: "48",
							text: "item 48"
						})
					]
				});

				var oSelect17 = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "49",
							text: "item 49"
						}),

						new sap.ui.core.Item({
							key: "50",
							text: "item 50"
						}),

						new sap.ui.core.Item({
							key: "51",
							text: "item 51"
						})
					]
				});

				var oSelect8 = new sap.m.Select({
					type: sap.m.SelectType.IconOnly,
					icon: sap.ui.core.IconPool.getIconURI("add"),
					items: [
						new sap.ui.core.Item({
							key: "52",
							text: "item 52"
						}),

						new sap.ui.core.Item({
							key: "53",
							text: "item 53"
						}),

						new sap.ui.core.Item({
							key: "54",
							text: "item 54"
						}),
					]
				});

				var aSelects = [oSelect1, oSelect2, oSelect3, oSelect4, oSelect5, oSelect6, oSelect7, oSelect8];

				// arrange
				oSelect1.placeAt("content");
				oSelect2.placeAt("content");
				oSelect3.placeAt("content");
				oSelect4.placeAt("content");
				oSelect5.placeAt("content");
				oSelect6.placeAt("content");
				oSelect7.placeAt("content");
				oSelect8.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assert
				aSelects.forEach(function(oSelect) {
					var CSS_CLASS = sap.m.SelectRenderer.CSS_CLASS;

					if (!oSelect.getVisible()) {
						return;
					}

					if (oSelect.getType() === sap.m.SelectType.Default) {
						ok(oSelect.$().length, "The HTML div container html element exists");
						ok(oSelect.$("label").length, "The HTML label first-child element exists");
						ok(oSelect.$("arrow").length, "The HTML span element for the arrow exists");
					} else if (oSelect.getType() === sap.m.SelectType.IconOnly) {
						ok(oSelect.$("icon").length, "The HTML span element for the icon exists");
					}

					if (oSelect._isRequiredSelectElement() && oSelect.getItems().length) {
						ok(oSelect.$("select").length, "The select html element exists");
						ok(oSelect.getDomRef("select").getAttribute("aria-hidden"), "true", "The shadow DOM is hidden to assistive technologies")
					}

					if (oSelect.getType() === sap.m.SelectType.Default) {
						ok(oSelect.$().hasClass(CSS_CLASS), 'The select container html element "must have" the CSS class "' + CSS_CLASS + '"');
						ok(oSelect.$("label").hasClass(CSS_CLASS + "Label"), 'The select first-child html label element "must have" the CSS class "' + CSS_CLASS + 'Label"');
						ok(oSelect.$("arrow").hasClass(CSS_CLASS + "Arrow"), 'The select html span element "must have" the CSS class "' + CSS_CLASS + 'Arrow"');
					} else if (oSelect.getType() === sap.m.SelectType.IconOnly) {
						ok(oSelect.$("icon").hasClass(CSS_CLASS + "Icon"), 'The select html span element must have the CSS class "' + CSS_CLASS + 'Icon"');
					}

					if (oSelect.getType() === sap.m.SelectType.Default) {
						strictEqual(oSelect.getDomRef().getAttribute("role"), "combobox");
					} else if (oSelect.getType() === sap.m.SelectType.IconOnly) {
						strictEqual(oSelect.getDomRef().getAttribute("role"), "button");
					}

					strictEqual(oSelect.getDomRef().getAttribute("aria-expanded"), "false");
					strictEqual(oSelect.getDomRef().getAttribute("aria-live"), "polite");

					// cleanup
					oSelect.destroy();
				});
			});

			/* =========================================================== */
			/* Events module                                               */
			/* =========================================================== */

			module("Events");

			/* ------------------------------ */
			/* touchstart                     */
			/* ------------------------------ */

			test("touchstart", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				sap.ui.test.qunit.triggerTouchEvent("touchstart", oSelect.getDomRef(), {
					touches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					},

					targetTouches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					}
				});

				// assert
				ok(oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"), 'The select must have the css class ' + sap.m.SelectRenderer.CSS_CLASS + 'Pressed');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* touchend                       */
			/* ------------------------------ */

			test("touchend", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// act
				sap.ui.test.qunit.triggerTouchEvent("touchstart", oSelect.getDomRef(), {
					touches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					},

					targetTouches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					}
				});

				sap.ui.test.qunit.triggerTouchEvent("touchend", oSelect.getDomRef(), {
					targetTouches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					}
				});

				// assert
				ok(!oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"), 'The select must not have the CSS class ' + sap.m.SelectRenderer.CSS_CLASS + 'Pressed');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* tap                            */
			/* ------------------------------ */

			test("tap", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),
					]
				});

				// arrange
				var fnTapSpy = this.spy(oSelect, "ontap"),
					fnPickerCloseSpy,
					fnPickerIsOpenSpy,
					fnOpenSpy;

				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				sap.ui.test.qunit.triggerTouchEvent("touchstart", oSelect.getDomRef(), {
					touches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					},

					targetTouches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					}
				});

				fnOpenSpy = this.spy(oSelect.getPicker(), "open");
				fnPickerCloseSpy = this.spy(oSelect.getPicker(), "close");
				fnPickerIsOpenSpy = this.spy(oSelect.getPicker(), "isOpen");

				sap.ui.test.qunit.triggerTouchEvent("touchend", oSelect.getDomRef(), {
					targetTouches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					}
				});

				sap.ui.test.qunit.triggerTouchEvent("tap", oSelect.getDomRef(), {
					targetTouches: {
						0: {
							pageX: 10,
							length: 1
						},

						length: 1
					}
				});

				// assert
				ok(fnTapSpy.calledOnce, "ontap() event handler must be called exactly once on " + oSelect);
				strictEqual(fnPickerCloseSpy.callCount, 0, "close() method of the popover must not be called");
				strictEqual(fnOpenSpy.callCount, 1, "open() method was called exactly once");
				ok(oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"), 'The select must have the css class ' + sap.m.SelectRenderer.CSS_CLASS + 'Pressed');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onkeypress                     */
			/* ------------------------------ */

			var fnKeypressTestCase = function(mOptions) {
				test("onkeypress", function() {

					// system under test
					var oSelect = mOptions.control;

					// arrange
					oSelect.placeAt("content");
					sap.ui.getCore().applyChanges();
					oSelect.focus();
					var fnKeypressSpy = this.spy(oSelect, "onkeypress");

					// act
					sap.ui.test.qunit.triggerKeypress(oSelect.getDomRef(), mOptions.character);

					// assert
					ok(oSelect.getSelectedItem() === mOptions.output);
					ok(oSelect.getList().getSelectedItem() === mOptions.output);

					// cleanup
					oSelect.destroy();
				});
			};

			(function() {
				var oExpectedItem;

				fnKeypressTestCase({
					control: new sap.m.Select({
						items: [
							new sap.ui.core.Item({
								key: "0",
								text: "a item 0"
							}),

							oExpectedItem = new sap.ui.core.Item({
								key: "1",
								text: "A item 1"
							})
						]
					}),

					character: "A",
					output: oExpectedItem
				});

				fnKeypressTestCase({
					control: new sap.m.Select({
						items: [
							new sap.ui.core.Item({
								key: "0",
								text: "A item 0"
							}),

							oExpectedItem = new sap.ui.core.Item({
								key: "1",
								text: "a item 1"
							})
						]
					}),

					character: "A",
					output: oExpectedItem
				});

				fnKeypressTestCase({
					control: new sap.m.Select({
						items: [
							new sap.ui.core.Item({
								key: "0",
								text: "0 item 0"
							}),

							oExpectedItem = new sap.ui.core.Item({
								key: "1",
								text: "1 item 1"
							})
						]
					}),

					character: "1",
					output: oExpectedItem
				});
			}());

			test("onkeypress if the selected item changes when a key is pressed", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "DZ",
							text: "Algeria"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "BE",
							text: "Belgium"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeypressSpy = this.spy(oSelect, "onkeypress");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeypress(oSelect.getDomRef(), "B");

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "BE");
				// strictEqual(oSelect.getValue(), "Belgium");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "BE");
				strictEqual(oSelect.$("label").text(), "Belgium");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapshow                      */
			/* ------------------------------ */

			test("onsapshow F4 - the picker pop-up", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnShowSpy = this.spy(oSelect, "onsapshow");
				var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.OPEN : sap.ui.core.OpenState.OPENING;	// no animation on ie9

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.F4);

				// assert
				strictEqual(fnShowSpy.callCount, 1, "onsapshow() method was called exactly once");
				strictEqual(oSelect.getPicker().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is opening");
				ok(oSelect.isOpen(), "Control's picker pop-up is open");

				// cleanup
				oSelect.destroy();
			});

			test("onsapshow Alt + DOWN - open control's picker the pop-up", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnShowSpy = this.spy(oSelect, "onsapshow");
				var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.OPEN : sap.ui.core.OpenState.OPENING;	// no animation on ie9

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN, false, true);

				// assert
				strictEqual(fnShowSpy.callCount, 1, "onsapshow() method was called exactly once");
				strictEqual(oSelect.getPicker().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is opening");
				ok(oSelect.isOpen(), "Control's picker pop-up is open");

				// cleanup
				oSelect.destroy();
			});

			test("onsapshow F4 - close control's picker pop-up", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnShowSpy = this.spy(oSelect, "onsapshow");
				var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.CLOSED : sap.ui.core.OpenState.CLOSING;	// no animation on ie9

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.F4);
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.F4);

				// assert
				strictEqual(fnShowSpy.callCount, 2, "onsapshow() method was called twice");
				strictEqual(oSelect.getPicker().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is closing");

				// cleanup
				oSelect.destroy();
			});

			test("onsapshow Alt + DOWN - close control's picker pop-up", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnShowSpy = this.spy(oSelect, "onsapshow");
				var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.CLOSED : sap.ui.core.OpenState.CLOSING;	// no animation on ie9

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN, false, true);
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN, false, true);

				// assert
				strictEqual(fnShowSpy.callCount, 2, "onsapshow() method was called twice");
				strictEqual(oSelect.getPicker().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is closing");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsaphide                      */
			/* ------------------------------ */

			test("onsaphide Alt + UP - open control's picker pop-up", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnHideSpy = this.spy(oSelect, "onsaphide");
				var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.OPEN : sap.ui.core.OpenState.OPENING;	// no animation on ie9

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP, false, true, false);

				// assert
				strictEqual(fnHideSpy.callCount, 1, "onsaphide() method was called exactly once");
				strictEqual(oSelect.getPicker().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is opening");
				ok(oSelect.isOpen(), "Control's picker pop-up is open");

				// cleanup
				oSelect.destroy();
			});

			test("onsaphide Alt + UP - close control's picker pop-up", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnHideSpy = this.spy(oSelect, "onsaphide");
				var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.CLOSED : sap.ui.core.OpenState.CLOSING;	// no animation on ie9

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP, false, true, false);
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP, false, true, false);

				// assert
				strictEqual(fnHideSpy.callCount, 2, "onsaphide() method was called twice");
				strictEqual(oSelect.getPicker().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is closing");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapspace                     */
			/* ------------------------------ */

			test("onsapspace the spacebar key is pressed and the picker pop-up is close", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						}),

						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.SPACE);
				this.clock.tick(1000);	// wait 1s after the open animation is completed

				// assert
				ok(oSelect.isOpen(), "Control's picker pop-up is open");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event should not be fired");

				// cleanup
				oSelect.destroy();
			});

			test("onsapspace the spacebar key is pressed and the picker pop-up is open", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						}),

						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.SPACE);
				this.clock.tick(1000);

				// assert
				strictEqual(oSelect.isOpen(), false, "Control's picker pop-up is close");

				// cleanup
				oSelect.destroy();
			});

			test("onsapspace when spacebar key is pressed and the selection has changed", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						}),

						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);	// wait 1s after the open animation is completed
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);	// change the selection
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.SPACE);

				// assert
				strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapescape                    */
			/* ------------------------------ */

			test("onsapescape - close the picker pop-up if it is open", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnEscapeSpy = this.spy(oSelect, "onsapescape");
				var fnCloseSpy = this.spy(oSelect, "close");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ESCAPE);

				// assert
				strictEqual(fnEscapeSpy.callCount, 1, "onsapescape() method was called exactly once");
				strictEqual(fnCloseSpy.callCount, 0, "close() method is not called");

				// cleanup
				oSelect.destroy();
			});

			test("onsapescape - close the control's picker pop-up if it is open", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);

				var fnEscapeSpy = this.spy(oSelect, "onsapescape");
				var fnCloseSpy = this.spy(oSelect, "close");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ESCAPE);

				// assert
				strictEqual(fnEscapeSpy.callCount, 1, "onsapescape() method was called exactly once");
				strictEqual(fnCloseSpy.callCount, 1, "close() method was called exactly once");

				// cleanup
				oSelect.destroy();
			});

			test("onsapescape when escape key is pressed and the selection has changed", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						}),

						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);	// wait 1s after the open animation is completed
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);	// change the selection

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ESCAPE);

				// assert
				strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapenter                     */
			/* ------------------------------ */

			test("onsapenter - close list box", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnEnterSpy = this.spy(oSelect, "onsapenter");
				var fnCloseSpy = this.spy(oSelect, "close");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ENTER);

				// assert
				strictEqual(fnEnterSpy.callCount, 1, "onsapenter() method was called exactly once");
				strictEqual(fnCloseSpy.callCount, 1, "close() method was called exactly once");

				// cleanup
				oSelect.destroy();
			});

			test("onsapenter when enter key is pressed and the selection has changed", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "GER",
							text: "Germany"
						}),

						new sap.ui.core.Item({
							key: "CU",
							text: "Cuba"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);	// change the selection
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ENTER);

				// assert
				strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapdown                      */
			/* ------------------------------ */

			test("onsapdown", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "2",
							text: "item 2"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyDownSpy = this.spy(oSelect, "onsapdown");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

				// assert
				strictEqual(fnKeyDownSpy.callCount, 1, "onsapdown() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "2");
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "2");
				strictEqual(oSelect.$("label").text(), "item 2");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsapdown", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyDownSpy = this.stub(oSelect, "onsapdown");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

				// assert
				strictEqual(fnKeyDownSpy.callCount, 1, "onsapdown() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event not fired");
				ok(oSelect.getSelectedItem() === null);
				strictEqual(oSelect.getSelectedItemId(), "");
				strictEqual(oSelect.getSelectedKey(), "");
				// strictEqual(oSelect.getValue(), "");	// not implemented
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.getList().getSelectedItemId(), "");
				strictEqual(oSelect.getList().getSelectedKey(), "");
				strictEqual(oSelect.$("label").text(), "");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsapdown", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyDownSpy = this.spy(oSelect, "onsapdown");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

				// assert
				strictEqual(fnKeyDownSpy.callCount, 1, "onsapdown() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "0");
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});
	
			test('it should set the attribute "aria-activedescendant" after the picker pop-up is opened', function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item(),
						oExpectedItem = new sap.ui.core.Item({
							text: "Germany"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);	// wait after the open animation is completed and the list is rendered

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getFocusDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

				// assert
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onfocusout                     */
			/* ------------------------------ */

			test("it should not fire the change event if re-rendering occurs (test case 1)", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item(),
						new sap.ui.core.Item({
							text: "Germany"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				oSelect.rerender();

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0);

				// cleanup
				oSelect.destroy();
			});

			test("it should not fire the change event if re-rendering occurs (test case 2)", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item(),
						new sap.ui.core.Item({
							text: "Germany"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);
				oSelect.rerender();

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0);

				// cleanup
				oSelect.destroy();
			});

			// BCP 1570819144
			test("it should not fire the change event after the selected item is removed and re-added again", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item()
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.getFocusDomRef().blur();
				oSelect.removeAllItems();
				oSelect.addItem(new sap.ui.core.Item());
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				oSelect.getFocusDomRef().blur();

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0);

				// cleanup
				oSelect.destroy();
			});

			test("it should fire the change event", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item(),
						new sap.ui.core.Item({
							text: "Germany"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);
				oSelect.rerender();
				sap.ui.getCore().applyChanges();

				// act
				oSelect.getFocusDomRef().blur();

				// assert
				strictEqual(fnFireChangeSpy.callCount, 1);

				// cleanup
				oSelect.destroy();
			});

			test("it should not fire the change event", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item()
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				oSelect.getFocusDomRef().blur();

				// assert
				strictEqual(fnFireChangeSpy.callCount, 0);

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapup                        */
			/* ------------------------------ */

			test("onsapup", function() {

				// system under test
				var oItem;
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						oItem = new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						})
					],

					selectedItem: oItem
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyUpSpy = this.spy(oSelect, "onsapup");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

				// assert
				strictEqual(fnKeyUpSpy.callCount, 1, "onsapup() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "0");
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsapup", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyUpSpy = this.spy(oSelect, "onsapup");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

				// assert
				strictEqual(fnKeyUpSpy.callCount, 1, "onsapup() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === null);
				strictEqual(oSelect.getSelectedItemId(), "");
				strictEqual(oSelect.getSelectedKey(), "");
				// strictEqual(oSelect.getValue(), "");	// not implemented
				ok(oSelect.getList().getSelectedItem() === null);
				strictEqual(oSelect.getList().getSelectedItemId(), "");
				strictEqual(oSelect.getList().getSelectedKey(), "");
				strictEqual(oSelect.$("label").text(), "");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsapup", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1",
							enabled: false
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "2",
							text: "item 2"
						})
					],

					selectedItem: oExpectedItem
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyUpSpy = this.stub(oSelect, "onsapup");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

				// assert
				strictEqual(fnKeyUpSpy.callCount, 1, "onsapup() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "2");
				// strictEqual(oSelect.getValue(), "item 2");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "2");
				strictEqual(oSelect.$("label").text(), "item 2");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test('it should set the attribute "aria-activedescendant" after the picker pop-up is opened', function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							text: "Germany"
						}),
						new sap.ui.core.Item({
							key: "AR",
							text: "Argentina"
						})
					],
					selectedKey: "AR"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);	// wait after the open animation is completed and the list is rendered

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getFocusDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

				// assert
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsaphome                      */
			/* ------------------------------ */

			test("onsaphome", function() {

				// system under test
				var oExpectedItem;
				var oItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "0",
							text: "item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2",
							enabled: false
						}),

						oItem = new sap.ui.core.Item({
							key: "3",
							text: "item 3"
						}),

						new sap.ui.core.Item({
							key: "4",
							text: "item 4",
							enabled: false
						})
					],

					selectedItem: oItem
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyHomeSpy = this.spy(oSelect, "onsaphome");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.HOME);

				// assert
				strictEqual(fnKeyHomeSpy.callCount, 1, "onsaphome() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "0");
				// strictEqual(oSelect.getValue(), "item 0");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "0");
				strictEqual(oSelect.$("label").text(), "item 0");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsaphome", function() {

				// system under test
				var oExpectedItem;
				var oItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),

						new sap.ui.core.Item({
							key: "3",
							text: "item 3"
						}),

						oItem = new sap.ui.core.Item({
							key: "4",
							text: "item 4"
						})
					],

					selectedItem: oItem
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyHomeSpy = this.spy(oSelect, "onsaphome");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.HOME);

				// assert
				strictEqual(fnKeyHomeSpy.callCount, 1, "onsaphome() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				// strictEqual(oSelect.getValue(), "item 1");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				strictEqual(oSelect.$("label").text(), "item 1");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsaphome when the Home key is pressed", function() {

				// system under test
				var oExpectedItem;
				var oItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),

						new sap.ui.core.Item({
							key: "3",
							text: "item 3"
						}),

						oItem = new sap.ui.core.Item({
							key: "4",
							text: "item 4"
						})
					],

					selectedItem: oItem
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyHomeSpy = this.spy(oSelect, "onsaphome");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.HOME);
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.HOME);

				// assert
				strictEqual(fnKeyHomeSpy.callCount, 2, "onsaphome() method was called exactly twice");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "1");
				// strictEqual(oSelect.getValue(), "item 1");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "1");
				strictEqual(oSelect.$("label").text(), "item 1");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test('it should set the attribute "aria-activedescendant" after the picker pop-up is opened', function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							enabled: false
						}),

						oExpectedItem = new sap.ui.core.Item({
							text: "expected"
						}),

						new sap.ui.core.Item(),

						new sap.ui.core.Item({
							key: "3"
						})
					],

					selectedKey: "3"
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);	// wait after the open animation is completed

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getFocusDomRef(), jQuery.sap.KeyCodes.HOME);

				// assert
				strictEqual(oSelect.getFocusDomRef().getAttribute("aria-activedescendant"), oExpectedItem.getId());

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onsapend                       */
			/* ------------------------------ */

			test("onsapend", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),

						new sap.ui.core.Item({
							key: "3",
							text: "item 3"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "4",
							text: "item 4"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyEndSpy = this.spy(oSelect, "onsapend");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.END);

				// assert
				strictEqual(fnKeyEndSpy.callCount, 1, "onsapend() method was called exactly once");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "4");
				// strictEqual(oSelect.getValue(), "item 4");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "4");
				strictEqual(oSelect.$("label").text(), "item 4");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test("onsapend when the End key is pressed", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "item 0",
							enabled: false
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "item 1"
						}),

						new sap.ui.core.Item({
							key: "2",
							text: "item 2"
						}),

						new sap.ui.core.Item({
							key: "3",
							text: "item 3"
						}),

						oExpectedItem = new sap.ui.core.Item({
							id: "item-id",
							key: "4",
							text: "item 4"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeyEndSpy = this.spy(oSelect, "onsapend");
				var fnFireChangeSpy = this.spy(oSelect, "fireChange");

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.END);
				sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.END);

				// assert
				strictEqual(fnKeyEndSpy.callCount, 2, "onsapend() method was called exactly twice");
				strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
				ok(oSelect.getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getSelectedItemId(), "item-id");
				strictEqual(oSelect.getSelectedKey(), "4");
				// strictEqual(oSelect.getValue(), "item 4");	// not implemented
				ok(oSelect.getList().getSelectedItem() === oExpectedItem);
				strictEqual(oSelect.getList().getSelectedItemId(), "item-id");
				strictEqual(oSelect.getList().getSelectedKey(), "4");
				strictEqual(oSelect.$("label").text(), "item 4");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test('it should set the attribute "aria-activedescendant" after the picker pop-up is opened', function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item(),
						new sap.ui.core.Item(),
						oExpectedItem = new sap.ui.core.Item({
							text: "expected"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();
				this.clock.tick(1000);	// wait after the open animation is completed

				// act
				sap.ui.test.qunit.triggerKeydown(oSelect.getFocusDomRef(), jQuery.sap.KeyCodes.END);

				// assert
				strictEqual(oSelect.getFocusDomRef().getAttribute("aria-activedescendant"), oExpectedItem.getId());

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onAfterOpen                    */
			/* ------------------------------ */

			test("onAfterOpen test case 1", function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							text: "expected"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();

				// act
				oSelect.open();
				this.clock.tick(1000);	// wait 1s after the open animation is completed

				// assert
				strictEqual(oSelect.getFocusDomRef().getAttribute("aria-expanded"), "true");
				strictEqual(oSelect.getDomRef().getAttribute("aria-owns"), oSelect.getList().getId(), 'the attribute "aria-owns" is set after the list is rendered');
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			test('it should set the attribute "aria-activedescendant" after the picker pop-up is opened', function() {

				// system under test
				var oExpectedItem;
				var oSelect = new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							text: "expected"
						})
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();

				// act
				oSelect.open();
				this.clock.tick(1000);	// wait 1s after the open animation is completed and the list is rendered

				// assert
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), oExpectedItem.getId(), 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* ------------------------------ */
			/* onAfterClose                   */
			/* ------------------------------ */

			test("onAfterClose", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item()
					]
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				oSelect.open();

				// act
				oSelect.close();
				if (jQuery.support.cssAnimations) {	// no animation on ie9
					this.clock.tick(1000);
				}

				// assert
				strictEqual(oSelect.getFocusDomRef().getAttribute("aria-expanded"), "false");
				strictEqual(jQuery(oSelect.getFocusDomRef()).attr("aria-activedescendant"), undefined, 'The "aria-activedescendant" attribute is set when the active descendant is rendered and visible');

				// cleanup
				oSelect.destroy();
			});

			/* =========================================================== */
			/* Text direction module                                       */
			/* =========================================================== */

			module("Text direction");

			test("textDirection set to RTL", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							text: "(+359) 111 222 333"
						}),
						new sap.ui.core.Item({
							text: "20/06/1983 11:30"
						})
					],
					textDirection: sap.ui.core.TextDirection.RTL
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.$("label").attr("dir"), "rtl", "Dir attribute is rendered and is set to 'rtl'");

				// cleanup
				oSelect.destroy();

			});

			test("textDirection set to LTR", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							text: "(+359) 111 222 333"
						}),
						new sap.ui.core.Item({
							text: "20/06/1983 11:30"
						})
					],
					textDirection: sap.ui.core.TextDirection.LTR
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assert
				strictEqual(oSelect.$("label").attr("dir"), "ltr", "Dir attribute is rendered and is set to 'ltr'");

				// cleanup
				oSelect.destroy();

			});

			test("textDirection set to RTL and textAlign set to BEGIN", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							text: "(+359) 111 222 333"
						}),
						new sap.ui.core.Item({
							text: "20/06/1983 11:30"
						})
					],
					textDirection: sap.ui.core.TextDirection.RTL,
					textAlign: sap.ui.core.TextAlign.Begin
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assert
				var $SelectLabel = oSelect.$("label");

				strictEqual($SelectLabel.attr("dir"), "rtl", "Dir attribute is rendered and is set to 'rtl'");
				strictEqual($SelectLabel.css("text-align"), "right", "Text align style is shifted to right");

				// cleanup
				oSelect.destroy();

			});

			test("textDirection set to LTR and textAlign set to END", function() {

				// system under test
				var oSelect = new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							text: "(+359) 111 222 333"
						}),
						new sap.ui.core.Item({
							text: "20/06/1983 11:30"
						})
					],
					textDirection: sap.ui.core.TextDirection.LTR,
					textAlign: sap.ui.core.TextAlign.End
				});

				// arrange
				oSelect.placeAt("content");
				sap.ui.getCore().applyChanges();

				// assert
				var $SelectLabel = oSelect.$("label");

				strictEqual($SelectLabel.attr("dir"), "ltr", "Dir attribute is rendered and is set to 'ltr'");
				strictEqual($SelectLabel.css("text-align"), "right", "Text align style is shifted to right");

				// cleanup
				oSelect.destroy();

			});

		</script>
	</head>
	<body id="body" class="sapUiBody">
		<h1 id="qunit-header">qUnit tests: sap.m.Select</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<div id="qunit-testrunner-toolbar"></div>
		<ol id="qunit-tests"></ol>
		<div id="content" class="content"></div>
	</body>
</html>